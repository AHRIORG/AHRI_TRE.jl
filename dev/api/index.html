<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · AHRI_TRE</title><meta name="title" content="API · AHRI_TRE"/><meta property="og:title" content="API · AHRI_TRE"/><meta property="twitter:title" content="API · AHRI_TRE"/><meta name="description" content="Documentation for AHRI_TRE."/><meta property="og:description" content="Documentation for AHRI_TRE."/><meta property="twitter:description" content="Documentation for AHRI_TRE."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="AHRI_TRE logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../introduction/">Introduction</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li><li><a class="tocitem" href="#Function-Specifications"><span>Function Specifications</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/AHRIORG/AHRI_TRE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><ul><li><a href="#AHRI_TRE.DEFAULT_ODBC_DRIVER_PATH"><code>AHRI_TRE.DEFAULT_ODBC_DRIVER_PATH</code></a></li><li><a href="#AHRI_TRE.ColumnInfo"><code>AHRI_TRE.ColumnInfo</code></a></li><li><a href="#AHRI_TRE.DatabaseFlavour"><code>AHRI_TRE.DatabaseFlavour</code></a></li><li><a href="#AHRI_TRE._strip_html-Tuple{AbstractString}"><code>AHRI_TRE._strip_html</code></a></li><li><a href="#AHRI_TRE.add_domain!-Tuple{DataStore, Domain}"><code>AHRI_TRE.add_domain!</code></a></li><li><a href="#AHRI_TRE.add_study!-Tuple{DataStore, Study, Domain}"><code>AHRI_TRE.add_study!</code></a></li><li><a href="#AHRI_TRE.add_study_domain!-Tuple{DataStore, Study, Domain}"><code>AHRI_TRE.add_study_domain!</code></a></li><li><a href="#AHRI_TRE.add_transformation!-Tuple{DataStore, Transformation}"><code>AHRI_TRE.add_transformation!</code></a></li><li><a href="#AHRI_TRE.add_transformation_input-Tuple{DataStore, Int64, Base.UUID}"><code>AHRI_TRE.add_transformation_input</code></a></li><li><a href="#AHRI_TRE.add_transformation_input-Tuple{DataStore, Transformation, AssetVersion}"><code>AHRI_TRE.add_transformation_input</code></a></li><li><a href="#AHRI_TRE.add_transformation_output-Tuple{DataStore, Transformation, AssetVersion}"><code>AHRI_TRE.add_transformation_output</code></a></li><li><a href="#AHRI_TRE.add_transformation_output-Tuple{DataStore, Int64, Base.UUID}"><code>AHRI_TRE.add_transformation_output</code></a></li><li><a href="#AHRI_TRE.attach_datafile-Tuple{DataStore, AssetVersion, AbstractString, String}"><code>AHRI_TRE.attach_datafile</code></a></li><li><a href="#AHRI_TRE.attach_datafile-Tuple{DataStore, Study, String, AbstractString, String}"><code>AHRI_TRE.attach_datafile</code></a></li><li><a href="#AHRI_TRE.attach_datafile_version-Tuple{DataStore, AssetVersion, String, AbstractString, String, Bool, Bool}"><code>AHRI_TRE.attach_datafile_version</code></a></li><li><a href="#AHRI_TRE.caller_file_runtime"><code>AHRI_TRE.caller_file_runtime</code></a></li><li><a href="#AHRI_TRE.closedatastore-Tuple{DataStore}"><code>AHRI_TRE.closedatastore</code></a></li><li><a href="#AHRI_TRE.connect_mssql-NTuple{4, AbstractString}"><code>AHRI_TRE.connect_mssql</code></a></li><li><a href="#AHRI_TRE.convert_missing_to_string!-Tuple{DataFrames.DataFrame}"><code>AHRI_TRE.convert_missing_to_string!</code></a></li><li><a href="#AHRI_TRE.create_asset"><code>AHRI_TRE.create_asset</code></a></li><li><a href="#AHRI_TRE.create_dataset_meta-Tuple{DataStore, Study, String, String, DataFile}"><code>AHRI_TRE.create_dataset_meta</code></a></li><li><a href="#AHRI_TRE.create_duckdb_table_sql-Tuple{AbstractString, Vector{AHRI_TRE.Variable}}"><code>AHRI_TRE.create_duckdb_table_sql</code></a></li><li><a href="#AHRI_TRE.create_entity!-Tuple{DataStore, Entity, Domain}"><code>AHRI_TRE.create_entity!</code></a></li><li><a href="#AHRI_TRE.create_entity_relation!-Tuple{DataStore, EntityRelation, Domain}"><code>AHRI_TRE.create_entity_relation!</code></a></li><li><a href="#AHRI_TRE.create_entity_relation!"><code>AHRI_TRE.create_entity_relation!</code></a></li><li><a href="#AHRI_TRE.create_transformation-Tuple{String, String}"><code>AHRI_TRE.create_transformation</code></a></li><li><a href="#AHRI_TRE.createassets-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createassets</code></a></li><li><a href="#AHRI_TRE.createdatabase-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createdatabase</code></a></li><li><a href="#AHRI_TRE.createdatastore-Tuple{DataStore}"><code>AHRI_TRE.createdatastore</code></a></li><li><a href="#AHRI_TRE.createentities-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createentities</code></a></li><li><a href="#AHRI_TRE.createmapping-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createmapping</code></a></li><li><a href="#AHRI_TRE.createstudies-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createstudies</code></a></li><li><a href="#AHRI_TRE.createtransformations-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createtransformations</code></a></li><li><a href="#AHRI_TRE.createvariables-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createvariables</code></a></li><li><a href="#AHRI_TRE.dataset_to_arrow-Tuple{DataStore, AHRI_TRE.DataSet, String}"><code>AHRI_TRE.dataset_to_arrow</code></a></li><li><a href="#AHRI_TRE.dataset_to_csv-Tuple{DataStore, AHRI_TRE.DataSet, String}"><code>AHRI_TRE.dataset_to_csv</code></a></li><li><a href="#AHRI_TRE.dataset_to_dataframe-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.dataset_to_dataframe</code></a></li><li><a href="#AHRI_TRE.dataset_variables-Tuple{DBInterface.Connection, AHRI_TRE.DataSet}"><code>AHRI_TRE.dataset_variables</code></a></li><li><a href="#AHRI_TRE.emptydir-Tuple{AbstractString}"><code>AHRI_TRE.emptydir</code></a></li><li><a href="#AHRI_TRE.ensure_vocabulary!-Tuple{DataStore, String, String, Vector{AHRI_TRE.AbstractVocabularyItem}}"><code>AHRI_TRE.ensure_vocabulary!</code></a></li><li><a href="#AHRI_TRE.ensure_vocabulary!-Tuple{DataStore, Vocabulary}"><code>AHRI_TRE.ensure_vocabulary!</code></a></li><li><a href="#AHRI_TRE.extract_table_from_sql-Tuple{AbstractString}"><code>AHRI_TRE.extract_table_from_sql</code></a></li><li><a href="#AHRI_TRE.file_uri_to_path-Tuple{AbstractString}"><code>AHRI_TRE.file_uri_to_path</code></a></li><li><a href="#AHRI_TRE.get_asset-Tuple{DataStore, Study, String}"><code>AHRI_TRE.get_asset</code></a></li><li><a href="#AHRI_TRE.get_asset-Tuple{DataStore, Base.UUID}"><code>AHRI_TRE.get_asset</code></a></li><li><a href="#AHRI_TRE.get_assetversions-Tuple{DataStore, Asset}"><code>AHRI_TRE.get_assetversions</code></a></li><li><a href="#AHRI_TRE.get_check_constraint_values-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_check_constraint_values</code></a></li><li><a href="#AHRI_TRE.get_code_table_vocabulary-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_code_table_vocabulary</code></a></li><li><a href="#AHRI_TRE.get_column_comment-Tuple{Any, AbstractString, AbstractString, Union{Nothing, AbstractString}, DatabaseFlavour}"><code>AHRI_TRE.get_column_comment</code></a></li><li><a href="#AHRI_TRE.get_column_type_info-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_column_type_info</code></a></li><li><a href="#AHRI_TRE.get_datafile_meta-Tuple{DataStore, AssetVersion}"><code>AHRI_TRE.get_datafile_meta</code></a></li><li><a href="#AHRI_TRE.get_datafilename-Tuple{DataFile}"><code>AHRI_TRE.get_datafilename</code></a></li><li><a href="#AHRI_TRE.get_datasetname-Tuple{AHRI_TRE.DataSet}"><code>AHRI_TRE.get_datasetname</code></a></li><li><a href="#AHRI_TRE.get_domain-Tuple{DataStore, AbstractString}"><code>AHRI_TRE.get_domain</code></a></li><li><a href="#AHRI_TRE.get_eav_variable_names-Tuple{DataStore, DataFile}"><code>AHRI_TRE.get_eav_variable_names</code></a></li><li><a href="#AHRI_TRE.get_entity-Tuple{DataStore, Int64, String}"><code>AHRI_TRE.get_entity</code></a></li><li><a href="#AHRI_TRE.get_entityrelation-Tuple{DataStore, Int64, String}"><code>AHRI_TRE.get_entityrelation</code></a></li><li><a href="#AHRI_TRE.get_enum_values-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_enum_values</code></a></li><li><a href="#AHRI_TRE.get_foreign_key_reference-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_foreign_key_reference</code></a></li><li><a href="#AHRI_TRE.get_latest_version-Tuple{DataStore, Base.UUID}"><code>AHRI_TRE.get_latest_version</code></a></li><li><a href="#AHRI_TRE.get_latest_version-Tuple{Asset}"><code>AHRI_TRE.get_latest_version</code></a></li><li><a href="#AHRI_TRE.get_namedkey-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.get_namedkey</code></a></li><li><a href="#AHRI_TRE.get_original_column_type-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_original_column_type</code></a></li><li><a href="#AHRI_TRE.get_query_columns-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_query_columns</code></a></li><li><a href="#AHRI_TRE.get_query_columns-Tuple{Any, AbstractString, AHRI_TRE.MSSQLFlavour}"><code>AHRI_TRE.get_query_columns</code></a></li><li><a href="#AHRI_TRE.get_study-Tuple{DataStore, AbstractString}"><code>AHRI_TRE.get_study</code></a></li><li><a href="#AHRI_TRE.get_study-Tuple{DataStore, Base.UUID}"><code>AHRI_TRE.get_study</code></a></li><li><a href="#AHRI_TRE.get_study_variables"><code>AHRI_TRE.get_study_variables</code></a></li><li><a href="#AHRI_TRE.get_studyid-Tuple{DataStore, AbstractString}"><code>AHRI_TRE.get_studyid</code></a></li><li><a href="#AHRI_TRE.get_table-Tuple{DBInterface.Connection, String}"><code>AHRI_TRE.get_table</code></a></li><li><a href="#AHRI_TRE.get_table_columns-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_table_columns</code></a></li><li><a href="#AHRI_TRE.get_variable-Tuple{DataStore, Int64}"><code>AHRI_TRE.get_variable</code></a></li><li><a href="#AHRI_TRE.get_variable_id-Tuple{DBInterface.Connection, Any, Any}"><code>AHRI_TRE.get_variable_id</code></a></li><li><a href="#AHRI_TRE.get_vocabulary-Tuple{DataStore, Int64}"><code>AHRI_TRE.get_vocabulary</code></a></li><li><a href="#AHRI_TRE.git_commit_info"><code>AHRI_TRE.git_commit_info</code></a></li><li><a href="#AHRI_TRE.ingest_file-Tuple{DataStore, Study, String, AbstractString, String}"><code>AHRI_TRE.ingest_file</code></a></li><li><a href="#AHRI_TRE.ingest_file_version"><code>AHRI_TRE.ingest_file_version</code></a></li><li><a href="#AHRI_TRE.ingest_redcap_project-Tuple{DataStore, AbstractString, AbstractString, Study, Domain}"><code>AHRI_TRE.ingest_redcap_project</code></a></li><li><a href="#AHRI_TRE.initstudytypes-Tuple{}"><code>AHRI_TRE.initstudytypes</code></a></li><li><a href="#AHRI_TRE.initvalue_types-Tuple{}"><code>AHRI_TRE.initvalue_types</code></a></li><li><a href="#AHRI_TRE.insertdata-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.insertdata</code></a></li><li><a href="#AHRI_TRE.insertwithidentity-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.insertwithidentity</code></a></li><li><a href="#AHRI_TRE.is_code_table-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.is_code_table</code></a></li><li><a href="#AHRI_TRE.is_enum_type-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.is_enum_type</code></a></li><li><a href="#AHRI_TRE.is_ncname-Tuple{AbstractString}"><code>AHRI_TRE.is_ncname</code></a></li><li><a href="#AHRI_TRE.julia_type_to_sql_string-Tuple{Type}"><code>AHRI_TRE.julia_type_to_sql_string</code></a></li><li><a href="#AHRI_TRE.lines-Tuple{Any}"><code>AHRI_TRE.lines</code></a></li><li><a href="#AHRI_TRE.list_dataset_variables-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.list_dataset_variables</code></a></li><li><a href="#AHRI_TRE.list_domainentities-Tuple{DataStore, Int64}"><code>AHRI_TRE.list_domainentities</code></a></li><li><a href="#AHRI_TRE.list_domainrelations-Tuple{DataStore, Int64}"><code>AHRI_TRE.list_domainrelations</code></a></li><li><a href="#AHRI_TRE.list_studies-Tuple{DataStore}"><code>AHRI_TRE.list_studies</code></a></li><li><a href="#AHRI_TRE.list_study_assets-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_assets</code></a></li><li><a href="#AHRI_TRE.list_study_assets_df-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_assets_df</code></a></li><li><a href="#AHRI_TRE.list_study_datasets-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_datasets</code></a></li><li><a href="#AHRI_TRE.list_study_transformations-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_transformations</code></a></li><li><a href="#AHRI_TRE.list_study_variables"><code>AHRI_TRE.list_study_variables</code></a></li><li><a href="#AHRI_TRE.load_query-Tuple{DataStore, AHRI_TRE.DataSet, DBInterface.Connection, AbstractString}"><code>AHRI_TRE.load_query</code></a></li><li><a href="#AHRI_TRE.make_asset-Tuple{DataStore, DataFrames.DataFrameRow, Study}"><code>AHRI_TRE.make_asset</code></a></li><li><a href="#AHRI_TRE.makeparams-Tuple{Any}"><code>AHRI_TRE.makeparams</code></a></li><li><a href="#AHRI_TRE.map_sql_type_to_tre-Tuple{AbstractString, DatabaseFlavour}"><code>AHRI_TRE.map_sql_type_to_tre</code></a></li><li><a href="#AHRI_TRE.map_value_type-Tuple{AbstractString, Union{Missing, AbstractString}}"><code>AHRI_TRE.map_value_type</code></a></li><li><a href="#AHRI_TRE.opendatastore"><code>AHRI_TRE.opendatastore</code></a></li><li><a href="#AHRI_TRE.parse_check_constraint_values-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.parse_check_constraint_values</code></a></li><li><a href="#AHRI_TRE.parse_flavour-Tuple{AbstractString}"><code>AHRI_TRE.parse_flavour</code></a></li><li><a href="#AHRI_TRE.parse_in_list_values-Tuple{AbstractString}"><code>AHRI_TRE.parse_in_list_values</code></a></li><li><a href="#AHRI_TRE.parse_redcap_choices-Tuple{AbstractString}"><code>AHRI_TRE.parse_redcap_choices</code></a></li><li><a href="#AHRI_TRE.path_to_file_uri-Tuple{AbstractString}"><code>AHRI_TRE.path_to_file_uri</code></a></li><li><a href="#AHRI_TRE.prepare_datafile-Tuple{AbstractString, String}"><code>AHRI_TRE.prepare_datafile</code></a></li><li><a href="#AHRI_TRE.prepareinsertstatement-Tuple{DBInterface.Connection, Any, Any}"><code>AHRI_TRE.prepareinsertstatement</code></a></li><li><a href="#AHRI_TRE.prepareselectstatement-Tuple{DBInterface.Connection, Any, Vector{String}, Vector{String}}"><code>AHRI_TRE.prepareselectstatement</code></a></li><li><a href="#AHRI_TRE.quote_ident-Tuple{AbstractString}"><code>AHRI_TRE.quote_ident</code></a></li><li><a href="#AHRI_TRE.quote_identifier-Tuple{AbstractString, DatabaseFlavour}"><code>AHRI_TRE.quote_identifier</code></a></li><li><a href="#AHRI_TRE.quote_sql_str-Tuple{AbstractString}"><code>AHRI_TRE.quote_sql_str</code></a></li><li><a href="#AHRI_TRE.read_dataset-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.read_dataset</code></a></li><li><a href="#AHRI_TRE.read_dataset-Tuple{DataStore, String, String}"><code>AHRI_TRE.read_dataset</code></a></li><li><a href="#AHRI_TRE.redcap_export_eav-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_export_eav</code></a></li><li><a href="#AHRI_TRE.redcap_fields-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_fields</code></a></li><li><a href="#AHRI_TRE.redcap_metadata-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_metadata</code></a></li><li><a href="#AHRI_TRE.redcap_post-Tuple{Any, AbstractDict}"><code>AHRI_TRE.redcap_post</code></a></li><li><a href="#AHRI_TRE.redcap_post_tofile-Tuple{Any, AbstractDict, String}"><code>AHRI_TRE.redcap_post_tofile</code></a></li><li><a href="#AHRI_TRE.redcap_project_info-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_project_info</code></a></li><li><a href="#AHRI_TRE.redcap_project_info_df-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_project_info_df</code></a></li><li><a href="#AHRI_TRE.register_datafile-Tuple{DataStore, DataFile}"><code>AHRI_TRE.register_datafile</code></a></li><li><a href="#AHRI_TRE.register_dataset-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.register_dataset</code></a></li><li><a href="#AHRI_TRE.register_redcap_datadictionary-Tuple{DataStore, Int64, String, String}"><code>AHRI_TRE.register_redcap_datadictionary</code></a></li><li><a href="#AHRI_TRE.replace_database-Tuple{DBInterface.Connection, String, String, String}"><code>AHRI_TRE.replace_database</code></a></li><li><a href="#AHRI_TRE.save_asset_version!-Tuple{DataStore, Asset, String, Union{Nothing, VersionNumber}}"><code>AHRI_TRE.save_asset_version!</code></a></li><li><a href="#AHRI_TRE.save_dataset_variables!-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.save_dataset_variables!</code></a></li><li><a href="#AHRI_TRE.save_version!-Tuple{DataStore, AssetVersion}"><code>AHRI_TRE.save_version!</code></a></li><li><a href="#AHRI_TRE.savedataframe-Tuple{DBInterface.Connection, DataFrames.AbstractDataFrame, Any}"><code>AHRI_TRE.savedataframe</code></a></li><li><a href="#AHRI_TRE.selectdataframe-Tuple{DBInterface.Connection, String, Vector{String}, Vector{String}, Union{Tuple, AbstractDict, NamedTuple, AbstractVector}}"><code>AHRI_TRE.selectdataframe</code></a></li><li><a href="#AHRI_TRE.set_version-Tuple{AssetVersion, VersionNumber}"><code>AHRI_TRE.set_version</code></a></li><li><a href="#AHRI_TRE.set_version-Tuple{AssetVersion, Int64, Int64, Int64}"><code>AHRI_TRE.set_version</code></a></li><li><a href="#AHRI_TRE.sha256_digest_hex-Tuple{AbstractString}"><code>AHRI_TRE.sha256_digest_hex</code></a></li><li><a href="#AHRI_TRE.sql_meta-Tuple{Any, AbstractString, Int64, DatabaseFlavour}"><code>AHRI_TRE.sql_meta</code></a></li><li><a href="#AHRI_TRE.sql_meta-Tuple{Any, AbstractString, Int64, AbstractString}"><code>AHRI_TRE.sql_meta</code></a></li><li><a href="#AHRI_TRE.sql_to_dataset-Tuple{DataStore, Study, Domain, String, Any, AbstractString, String}"><code>AHRI_TRE.sql_to_dataset</code></a></li><li><a href="#AHRI_TRE.table_exists-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.table_exists</code></a></li><li><a href="#AHRI_TRE.table_has_primary_key-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.table_has_primary_key</code></a></li><li><a href="#AHRI_TRE.to_ncname-Tuple{AbstractString}"><code>AHRI_TRE.to_ncname</code></a></li><li><a href="#AHRI_TRE.transaction_begin-Tuple{DataStore}"><code>AHRI_TRE.transaction_begin</code></a></li><li><a href="#AHRI_TRE.transaction_begin-Tuple{DBInterface.Connection}"><code>AHRI_TRE.transaction_begin</code></a></li><li><a href="#AHRI_TRE.transaction_commit-Tuple{DBInterface.Connection}"><code>AHRI_TRE.transaction_commit</code></a></li><li><a href="#AHRI_TRE.transaction_commit-Tuple{DataStore}"><code>AHRI_TRE.transaction_commit</code></a></li><li><a href="#AHRI_TRE.transaction_rollback-Tuple{DBInterface.Connection}"><code>AHRI_TRE.transaction_rollback</code></a></li><li><a href="#AHRI_TRE.transaction_rollback-Tuple{DataStore}"><code>AHRI_TRE.transaction_rollback</code></a></li><li><a href="#AHRI_TRE.transform_eav_to_dataset-Tuple{DataStore, DataFile}"><code>AHRI_TRE.transform_eav_to_dataset</code></a></li><li><a href="#AHRI_TRE.transform_eav_to_table!-Tuple{DataStore, DataFile, AHRI_TRE.DataSet}"><code>AHRI_TRE.transform_eav_to_table!</code></a></li><li><a href="#AHRI_TRE.tre_type_to_duckdb_sql-Tuple{Int64}"><code>AHRI_TRE.tre_type_to_duckdb_sql</code></a></li><li><a href="#AHRI_TRE.update_domain-Tuple{DataStore, Domain}"><code>AHRI_TRE.update_domain</code></a></li><li><a href="#AHRI_TRE.updatevalues-Tuple{DBInterface.Connection, Vararg{Any, 5}}"><code>AHRI_TRE.updatevalues</code></a></li><li><a href="#AHRI_TRE.updatevariable_vocabulary-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.updatevariable_vocabulary</code></a></li><li><a href="#AHRI_TRE.upsert_entity!-Tuple{DataStore, Entity}"><code>AHRI_TRE.upsert_entity!</code></a></li><li><a href="#AHRI_TRE.upsert_entityrelation!-Tuple{DataStore, EntityRelation}"><code>AHRI_TRE.upsert_entityrelation!</code></a></li><li><a href="#AHRI_TRE.upsert_study!-Tuple{DataStore, Study}"><code>AHRI_TRE.upsert_study!</code></a></li><li><a href="#AHRI_TRE.upsert_variable!-Tuple{DataStore, Int64, String}"><code>AHRI_TRE.upsert_variable!</code></a></li><li><a href="#AHRI_TRE.verify_sha256_digest-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.verify_sha256_digest</code></a></li><li><a href="#AHRI_TRE.vocabulary_items-Tuple{Any}"><code>AHRI_TRE.vocabulary_items</code></a></li><li><a href="#AHRI_TRE.wrap_query_for_metadata-Tuple{AbstractString, DatabaseFlavour}"><code>AHRI_TRE.wrap_query_for_metadata</code></a></li></ul><h2 id="Function-Specifications"><a class="docs-heading-anchor" href="#Function-Specifications">Function Specifications</a><a id="Function-Specifications-1"></a><a class="docs-heading-anchor-permalink" href="#Function-Specifications" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.DEFAULT_ODBC_DRIVER_PATH" href="#AHRI_TRE.DEFAULT_ODBC_DRIVER_PATH"><code>AHRI_TRE.DEFAULT_ODBC_DRIVER_PATH</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ODBC_DRIVER_PATH</code></pre><p>Path to the Microsoft ODBC Driver for SQL Server.</p><p>This is read from the environment variable <code>ODBC_DRIVER_PATH</code> (typically via a <code>.env</code> file). If unset, it falls back to the standard Debian/Ubuntu installation path.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/constants.jl#L64-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.ColumnInfo" href="#AHRI_TRE.ColumnInfo"><code>AHRI_TRE.ColumnInfo</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ColumnInfo</code></pre><p>Internal structure to hold column metadata extracted from query results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L81-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.DatabaseFlavour" href="#AHRI_TRE.DatabaseFlavour"><code>AHRI_TRE.DatabaseFlavour</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract type for database flavors to enable multiple dispatch.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L5-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE._strip_html-Tuple{AbstractString}" href="#AHRI_TRE._strip_html-Tuple{AbstractString}"><code>AHRI_TRE._strip_html</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_strip_html(text::AbstractString) -&gt; String</code></pre><p>Remove HTML tags, script/style blocks, and decode a few common entities. Collapse whitespace to single spaces and trim ends. Used to clean REDCap rich-text labels before persisting them as variable descriptions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L121-L127">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_domain!-Tuple{DataStore, Domain}" href="#AHRI_TRE.add_domain!-Tuple{DataStore, Domain}"><code>AHRI_TRE.add_domain!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_domain!(store::DataStore, domain::Domain)::Domain</code></pre><p>Add a new domain record. If a domain with the same (name, uri) already exists (treating NULL uri correctly), it raises an error.</p><ul><li>&#39;domain&#39; is a Domain object containing the name, uri, and description.</li><li>&#39;store&#39; is the DataStore object containing the database connection.</li></ul><p>If the domain has a non-NULL URI, it must be unique with respect to the name and URI combination. If the domain has a NULL URI, it must be unique with respect to the name only, allowing at most one row with a NULL URI for each name. This function returns the newly created Domain object with the domain_id set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1117-L1127">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_study!-Tuple{DataStore, Study, Domain}" href="#AHRI_TRE.add_study!-Tuple{DataStore, Study, Domain}"><code>AHRI_TRE.add_study!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_study!(store::DataStore, study::Study, domain::Domain)::Study</code></pre><p>Create a new study in the TRE datastore and associate it with a domain.</p><ul><li><code>store</code>: The DataStore object containing the datastore connection.</li><li><code>study</code>: The Study object representing the study to be created.</li><li><code>domain</code>: The Domain object representing the domain to associate with the study.</li></ul><p>This function inserts or updates the study in the datastore and links it to the specified domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L751-L759">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_study_domain!-Tuple{DataStore, Study, Domain}" href="#AHRI_TRE.add_study_domain!-Tuple{DataStore, Study, Domain}"><code>AHRI_TRE.add_study_domain!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_study_domain!(store::DataStore, study::Study, domain::Domain)</code></pre><p>Add a domain to a study by inserting a record into the study_domains table.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;study&#39; is the Study object containing the study_id.</li><li>&#39;domain&#39; is the Domain object containing the domain_id.</li></ul><p>If the combination of (study<em>id, domain</em>id) already exists, it does nothing. If the domain is not already in the study.domains list, it adds it to the study.domains vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1231-L1240">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_transformation!-Tuple{DataStore, Transformation}" href="#AHRI_TRE.add_transformation!-Tuple{DataStore, Transformation}"><code>AHRI_TRE.add_transformation!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_transformation!(store::DataStore, transformation::Transformation)::Transformation</code></pre><p>Save a transformation in the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>transformation</code>: The Transformation object to save</li></ul><p>This function will insert the transformation into the database and return the updated Transformation object with its transformation_id set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1957-L1964">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_transformation_input-Tuple{DataStore, Int64, Base.UUID}" href="#AHRI_TRE.add_transformation_input-Tuple{DataStore, Int64, Base.UUID}"><code>AHRI_TRE.add_transformation_input</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_transformation_input(store::DataStore, transformation_id::Int, version_id::UUID)::Nothing</code></pre><p>Add a transformation input to the transformation_inputs table.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>transformation_id</code>: The ID of the transformation to which the input belongs.</li><li><code>version_id</code>: The UUID of the asset version that is the input to the transformation.</li></ul><p>This function will insert a new record into the transformation_inputs table linking the transformation to the asset version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2002-L2010">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_transformation_input-Tuple{DataStore, Transformation, AssetVersion}" href="#AHRI_TRE.add_transformation_input-Tuple{DataStore, Transformation, AssetVersion}"><code>AHRI_TRE.add_transformation_input</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_transformation_input(store::DataStore, transformation::Transformation, version::AssetVersion)::Nothing</code></pre><p>Add a transformation input to the transformation_inputs table using Transformation and AssetVersion objects.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>transformation</code>: The Transformation object containing the transformation_id.</li><li><code>version</code>: The AssetVersion object containing the version_id.</li></ul><p>This function checks that both the transformation and version have valid IDs before calling the lower-level function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2042-L2050">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_transformation_output-Tuple{DataStore, Int64, Base.UUID}" href="#AHRI_TRE.add_transformation_output-Tuple{DataStore, Int64, Base.UUID}"><code>AHRI_TRE.add_transformation_output</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_transformation_output(store::DataStore, transformation_id::Int, version_id::UUID)::Nothing</code></pre><p>Add a transformation output to the transformation_outputs table.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>transformation_id</code>: The ID of the transformation to which the output belongs.</li><li><code>version_id</code>: The UUID of the asset version that is the output of the transformation.</li></ul><p>This function will insert a new record into the transformation_outputs table linking the transformation to the asset version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1982-L1990">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.add_transformation_output-Tuple{DataStore, Transformation, AssetVersion}" href="#AHRI_TRE.add_transformation_output-Tuple{DataStore, Transformation, AssetVersion}"><code>AHRI_TRE.add_transformation_output</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_transformation_output(store::DataStore, transformation::Transformation, version::AssetVersion)::Nothing</code></pre><p>Add a transformation output to the transformation_outputs table using Transformation and AssetVersion objects.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>transformation</code>: The Transformation object containing the transformation_id.</li><li><code>version</code>: The AssetVersion object containing the version_id.</li></ul><p>This function checks that both the transformation and version have valid IDs before calling the lower-level function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2022-L2030">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.attach_datafile-Tuple{DataStore, AssetVersion, AbstractString, String}" href="#AHRI_TRE.attach_datafile-Tuple{DataStore, AssetVersion, AbstractString, String}"><code>AHRI_TRE.attach_datafile</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">attach_datafile(store::DataStore, assetversion::AssetVersion, file_path::AbstractString, edam_format::String;
compress::Bool=false, encrypt::Bool=false)::DataFile</code></pre><p>Attach a data file to an existing asset version in the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>assetversion</code>: The AssetVersion object to which the data file will be attached.</li><li><code>file_path</code>: The full path including the file name to the file.</li><li><code>edam_format</code>: The EDAM format of the data file (e.g., &quot;http://edamontology.org/format_3752&quot; for a csv file).</li><li><code>compress</code>: Whether the file should be compressed (default is false).   If true, the file will be compressed using zstd, and the existing file will be replaced with the compressed version.</li><li><code>encrypt</code>: Whether the file should be encrypted (default is false). <strong>NOT currently implemented</strong></li></ul><p>This function does not copy the file, it only registers it in the TRE datastore. It assumes the file is already in the data lake and creates a DataFile object associated with the given asset version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L552-L566">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.attach_datafile-Tuple{DataStore, Study, String, AbstractString, String}" href="#AHRI_TRE.attach_datafile-Tuple{DataStore, Study, String, AbstractString, String}"><code>AHRI_TRE.attach_datafile</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">attach_datafile(store::DataStore, study::Study, asset_name::String,
file_path::AbstractString, edam_format::String; description::Union{String,Missing}=missing, compress::Bool=false, encrypt::Bool=false)::DataFile</code></pre><p>Attach a data file that is already in the data lake to the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>study</code>: The Study object to associate with the data file.</li><li><code>asset_name</code>: The name of the asset to which the data file will be attached. Must comply with xsd:NCName restrictions.</li><li><code>file_path</code>: The full path including the file name to the file.</li><li><code>edam_format</code>: The EDAM format of the data file (e.g., &quot;http://edamontology.org/format_3752&quot; for a csv file).</li><li><code>description</code>: A description of the data file (default is missing).</li><li><code>compress</code>: Whether the file should be compressed (default is false).   If true, the file will be compressed using zstd, and the existing file will be replaced with the compressed version.</li><li><code>encrypt</code>: Whether the file should be encrypted (default is false). <strong>NOT currently implemented</strong></li></ul><p>This function does not copy the file, it only registers it in the TRE datastore. It assumes the file is already in the data lake and creates an Asset object with a base version</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L523-L539">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.attach_datafile_version-Tuple{DataStore, AssetVersion, String, AbstractString, String, Bool, Bool}" href="#AHRI_TRE.attach_datafile_version-Tuple{DataStore, AssetVersion, String, AbstractString, String, Bool, Bool}"><code>AHRI_TRE.attach_datafile_version</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">attach_datafile_version(store::DataStore, assetversion::AssetVersion, version_note::String,
file_path::AbstractString, edam_format::String, bumpmajor::Bool, bumpminor::Bool;
compress::Bool=false, encrypt::Bool=false)::DataFile</code></pre><p>Attach a new data file as a new version to an existing asset in the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>assetversion</code>: The existing AssetVersion object to which the new data file version will be attached.</li><li><code>version_note</code>: A note describing the changes in this new version.</li><li><code>file_path</code>: The full path including the file name to the new file.</li><li><code>edam_format</code>: The EDAM format of the new data file (e.g., &quot;http://edamontology.org/format_3752&quot; for a csv file).</li><li><code>bumpmajor</code>: If true, increments the major version number and resets minor and patch to 0.</li><li><code>bumpminor</code>: If true, increments the minor version number and resets patch to 0.</li><li><code>compress</code>: Whether the file should be compressed (default is false).   If true, the file will be compressed using zstd, and the existing file will be replaced with the compressed version.</li><li><code>encrypt</code>: Whether the file should be encrypted (default is false). <strong>NOT currently implemented</strong></li></ul><p>This function does not copy the file, it only registers it in the TRE datastore. It assumes the file is already in the data lake and creates a new DataFile object associated with a new version of the given asset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L597-L615">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.caller_file_runtime" href="#AHRI_TRE.caller_file_runtime"><code>AHRI_TRE.caller_file_runtime</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">caller_file_runtime()</code></pre><p>Return the file path of the script that called this function at runtime.   &#39;level&#39; indicates how many levels up the call stack to go (default 1 = immediate caller).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L316-L321">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.closedatastore-Tuple{DataStore}" href="#AHRI_TRE.closedatastore-Tuple{DataStore}"><code>AHRI_TRE.closedatastore</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">closedatastore(store::DataStore)</code></pre><p>Close the connections in a DataStore object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L92-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.connect_mssql-NTuple{4, AbstractString}" href="#AHRI_TRE.connect_mssql-NTuple{4, AbstractString}"><code>AHRI_TRE.connect_mssql</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">connect_mssql(server::AbstractString, database::AbstractString,
              user::AbstractString, password::AbstractString;
              driver_path::AbstractString=ODBC_DRIVER_PATH,
              encrypt::Bool=true, trust_server_cert::Bool=true) -&gt; ODBC.Connection</code></pre><p>Create a connection to a Microsoft SQL Server database using ODBC.</p><p><strong>Arguments</strong></p><ul><li><code>server</code>: The server hostname or IP address (e.g., &quot;myserver.database.windows.net&quot;)</li><li><code>database</code>: The database name to connect to</li><li><code>user</code>: The username for authentication</li><li><code>password</code>: The password for authentication</li><li><code>driver_path</code>: Path to the ODBC driver library (default: ODBC<em>DRIVER</em>PATH)</li><li><code>encrypt</code>: Whether to use encrypted connection (default: true)</li><li><code>trust_server_cert</code>: Whether to trust the server certificate (default: true)</li></ul><p><strong>Returns</strong></p><p>An <code>ODBC.Connection</code> object.</p><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code> if the ODBC driver is not found at the specified path</li><li>ODBC errors if connection fails</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">conn = connect_mssql(&quot;myserver.database.windows.net&quot;, &quot;mydb&quot;, &quot;user&quot;, &quot;password&quot;)
try
    result = DBInterface.execute(conn, &quot;SELECT @@VERSION&quot;) |&gt; DataFrame
    println(result)
finally
    DBInterface.close!(conn)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_msql.jl#L4-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.convert_missing_to_string!-Tuple{DataFrames.DataFrame}" href="#AHRI_TRE.convert_missing_to_string!-Tuple{DataFrames.DataFrame}"><code>AHRI_TRE.convert_missing_to_string!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">convert_missing_to_string!(df::DataFrame)</code></pre><p>If the column type is Missing, convert the column eltype to Union{String, Missing}.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L158-L162">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.create_asset" href="#AHRI_TRE.create_asset"><code>AHRI_TRE.create_asset</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_asset(store::DataStore, study::Study, name::String, type::String, description::Union{Missing,String}=missing)::Asset</code></pre><p>Create a new asset in the TRE datastore and the base version of the asset.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>study</code>: The Study object to associate with the asset.</li><li><code>name</code>: The name of the asset. Will be coherced to xsd:NCName format.</li><li><code>type</code>: The type of the asset, either &quot;dataset&quot; or &quot;file&quot;.</li><li><code>description</code>: An optional description of the asset (default is missing).</li></ul><p>Returns the created Asset object with its asset_id and the first version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1720-L1730">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.create_dataset_meta-Tuple{DataStore, Study, String, String, DataFile}" href="#AHRI_TRE.create_dataset_meta-Tuple{DataStore, Study, String, String, DataFile}"><code>AHRI_TRE.create_dataset_meta</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_dataset_meta(store::DataStore, study::Study, dataset_name::String, description::String, datafile::DataFile)::DataSet</code></pre><p>Create a new dataset metadata object from an EAV data file.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;study&#39; is the Study object to associate with the dataset.</li><li>&#39;dataset_name&#39; is the name of the dataset to create.</li><li>&#39;description&#39; is a description for the dataset.</li><li>&#39;datafile&#39; is the DataFile object representing the EAV data file that the dataset is derived from.</li></ul><p>This function creates a new dataset asset and version, collects variable metadata from the EAV data file, and returns a DataSet object containing the dataset metadata.</p><p><strong>Assumptions</strong></p><ul><li>The EAV data is stored in a csv table with columns: record, field_name, and value.</li><li>The variable meta data is already defined in the datastore for the study, variables not found will be skipped.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2427-L2442">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.create_duckdb_table_sql-Tuple{AbstractString, Vector{AHRI_TRE.Variable}}" href="#AHRI_TRE.create_duckdb_table_sql-Tuple{AbstractString, Vector{AHRI_TRE.Variable}}"><code>AHRI_TRE.create_duckdb_table_sql</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_duckdb_table_sql(table_name::AbstractString, variables::Vector{Variable})::String</code></pre><p>Generate a CREATE TABLE SQL statement for DuckDB based on the provided variables.</p><ul><li>&#39;table_name&#39; is the name of the table to create.</li><li>&#39;variables&#39; is a vector of Variable objects defining the table schema.</li></ul><p>This function returns a SQL string that can be executed to create the table in DuckDB.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2620-L2627">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.create_entity!-Tuple{DataStore, Entity, Domain}" href="#AHRI_TRE.create_entity!-Tuple{DataStore, Entity, Domain}"><code>AHRI_TRE.create_entity!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_entity!(store::DataStore, entity::Entity, domain::Domain)::Entity</code></pre><p>Create a new entity in the TRE datastore and associate it with a domain.</p><ul><li><code>store</code>: The DataStore object containing the datastore connection.</li><li><code>entity</code>: The Entity object representing the entity to be created.</li><li><code>domain</code>: The Domain object representing the domain to associate with the entity.</li></ul><p>This function inserts or updates the entity in the datastore and links it to the specified domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L771-L779">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.create_entity_relation!" href="#AHRI_TRE.create_entity_relation!"><code>AHRI_TRE.create_entity_relation!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_entity_relation!(store::DataStore, subject_name::String, object_name::String, relation_name::String, 
                             domain_name::String, description::Union{Missing,String} = missing)::EntityRelation</code></pre><p>Create a new entity relation in the TRE datastore by specifying subject and object entity names, relation name, and domain name.</p><ul><li><code>store</code>: The DataStore object containing the datastore connection.</li><li><code>subject_name</code>: The name of the subject entity in the relation.</li><li><code>object_name</code>: The name of the object entity in the relation.</li><li><code>relation_name</code>: The name of the relation.</li><li><code>domain_name</code>: The name of the domain to associate with the entity relation.</li><li><code>description</code>: An optional description of the entity relation (default is missing).</li></ul><p>This function looks up the subject and object entities by name within the specified domain, creates the entity relation, and inserts or updates it in the datastore.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L826-L839">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.create_entity_relation!-Tuple{DataStore, EntityRelation, Domain}" href="#AHRI_TRE.create_entity_relation!-Tuple{DataStore, EntityRelation, Domain}"><code>AHRI_TRE.create_entity_relation!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_entity_relation!(store::DataStore, entityrelation::EntityRelation, domain::Domain)::EntityRelation</code></pre><p>Create a new entity relation in the TRE datastore and associate it with a domain.</p><ul><li><code>store</code>: The DataStore object containing the datastore connection.</li><li><code>entityrelation</code>: The EntityRelation object representing the entity relation to be created.</li><li><code>domain</code>: The Domain object representing the domain to associate with the entity relation.</li></ul><p>This function inserts or updates the entity relation in the datastore and links it to the specified domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L795-L803">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.create_transformation-Tuple{String, String}" href="#AHRI_TRE.create_transformation-Tuple{String, String}"><code>AHRI_TRE.create_transformation</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_transformation(transformation_type::String, description::String;
    repository_url::Union{Missing,String}=missing,
    commit_hash::Union{Missing,String}=missing,
    file_path::Union{Missing,String}=missing)::Transformation</code></pre><p>Create a Transformation object.</p><ul><li><code>transformation_type</code>: The type of transformation, must be one of &quot;ingest&quot;, &quot;transform&quot;, &quot;entity&quot;, or &quot;export&quot;.</li><li><code>description</code>: A description of the transformation.</li><li><code>repository_url</code>: An optional URL of the repository containing the transformation code (default is missing</li><li><code>commit_hash</code>: An optional commit hash of the transformation code (default is missing).</li><li><code>file_path</code>: An optional file path within the repository for the transformation code (default is missing).</li></ul><p>This function returns a Transformation object with the specified properties.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1927-L1940">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createassets-Tuple{DBInterface.Connection}" href="#AHRI_TRE.createassets-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createassets</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createassets(conn::DBInterface.Connection)</code></pre><p>Create tables to record data assets, rows, data and links to the transformations that use/created the assets A digital asset is a dataset or file that is stored in the TRE datalake. The asset<em>versions table tracks different versions of the assets, with a version label and note.  An asset can have multiple versions, and the latest version is flagged by the is</em>latest flag set as TRUE. The datasets table is a type of asset that is linked to the asset<em>versions table and managed through the ducklake extension. The datafiles table stores references to files in the data lake, with metadata such as compression, encryption, storage URI, format, and digest. The transformation</em>inputs and transformation<em>outputs tables link transformations to the asset versions they use or produce. The dataset</em>variables table links datasets to the variables (columns) they contain, representing the schema of the dataset. The data<em>asset</em>entities table links assets to entity instances, allowing for tracking which entities are associated with specific assets.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L534-L546">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createdatabase-Tuple{DBInterface.Connection}" href="#AHRI_TRE.createdatabase-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createdatabase</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createdatabase(conn::DBInterface.Connection; replace=false)</code></pre><p>Build the TRE schema objects in an existing PostgreSQL database connection. This function no longer creates or drops the physical database; that responsibility has been moved to <code>createdatastore</code> (see refactor 2b). The DuckDB/ducklake metadata database creation code remains untouched in <code>createdatastore</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L29-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createdatastore-Tuple{DataStore}" href="#AHRI_TRE.createdatastore-Tuple{DataStore}"><code>AHRI_TRE.createdatastore</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createdatastore(store::DataStore; superuser::String=&quot;postgres&quot;, superpwd::String=&quot;&quot;, port::Int=5432)</code></pre><p>Create or replace a PostgreSQL database for the TRE datastore, including the datalake if specified. This function creates a PostgreSQL database with the specified name and user credentials, and optionally creates a data lake using the DuckDb extension ducklake.     store::DataStore: The DataStore object containing connection details for the datastore and datalake databases.     superuser::String: The superuser name for PostgreSQL (default is &quot;postgres&quot;).     superpwd::String: The superuser password for PostgreSQL (default is empty).     port::Int: The port number for the PostgreSQL server (default is 5432 NB: ONLY USE THIS FUNCTION IN DEVELOPMENT OR TESTING ENVIRONMENTS,     as it will drop the existing database, lake and all its contents.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L195-L206">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createentities-Tuple{DBInterface.Connection}" href="#AHRI_TRE.createentities-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createentities</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createentities(conn)</code></pre><p>Create tables to store entities, entity relations, entity instances, and relation instances. Entities represent individuals, households, or other entities in the TRE. Entity relations represent relationships between entities, such as family or household relationships. Entity instances represent specific instances of entities in a study, allowing for tracking of entities across studies.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L742-L749">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createmapping-Tuple{DBInterface.Connection}" href="#AHRI_TRE.createmapping-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createmapping</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createmapping(conn::DBInterface.Connection)</code></pre><p>Create the table required for variable mapping. This table is used to map variables from one instrument to another. The table is created in the database provided as an argument. The variable mapping is based on the PyCrossVA approach.</p><p>The relationship to the PyCrossVA configuration file columns:</p><ul><li>New Column Name = destination<em>id - the variable</em>id of the new column</li><li>New Column Documentation = Stored in the variable table</li><li>study Column ID = from<em>id - the variable</em>id of the study variable</li><li>study Column Documentation = will be in the variables table</li><li>Relationship = operator - the operator to be used to create the new variable</li><li>Condition = operants - the operants to be used with the operator</li><li>Prerequisite = prerequisite<em>id - the variable</em>id of the prerequisite variable</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L859-L875">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createstudies-Tuple{DBInterface.Connection}" href="#AHRI_TRE.createstudies-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createstudies</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createstudies(conn::DBInterface.Connection)</code></pre><p>Creates tables to record a study and associated site/s for deaths contributed to the TRE (PostgreSQL version)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L226-L230">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createtransformations-Tuple{DBInterface.Connection}" href="#AHRI_TRE.createtransformations-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createtransformations</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createtransformations(conn::DBInterface.Connection)</code></pre><p>Create tables to record data transformations and data ingests</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L372-L376">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.createvariables-Tuple{DBInterface.Connection}" href="#AHRI_TRE.createvariables-Tuple{DBInterface.Connection}"><code>AHRI_TRE.createvariables</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">createvariables(conn)</code></pre><p>Create tables to record value types, variables and vocabularies</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L409-L413">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.dataset_to_arrow-Tuple{DataStore, AHRI_TRE.DataSet, String}" href="#AHRI_TRE.dataset_to_arrow-Tuple{DataStore, AHRI_TRE.DataSet, String}"><code>AHRI_TRE.dataset_to_arrow</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dataset_to_arrow(db, dataset, datapath)</code></pre><p>Save a dataset in the arrow format</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L379-L383">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.dataset_to_csv-Tuple{DataStore, AHRI_TRE.DataSet, String}" href="#AHRI_TRE.dataset_to_csv-Tuple{DataStore, AHRI_TRE.DataSet, String}"><code>AHRI_TRE.dataset_to_csv</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dataset_to_csv(store::DataStore, dataset::DataSet, outputdir::String; replace::Bool=false, compress=false)</code></pre><p>Save a dataset in compressed csv format</p><ul><li><code>store</code>: The DataStore object containing the datastore and datalake connections.</li><li><code>dataset</code>: The DataSet object to be saved as CSV.</li><li><code>outputdir</code>: The directory where the CSV file will be saved.</li><li><code>replace</code>: If true, will overwrite existing files (default is false).</li><li><code>compress</code>: If true, will save the CSV file in compressed .zst format (default is false).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L395-L404">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.dataset_to_dataframe-Tuple{DataStore, AHRI_TRE.DataSet}" href="#AHRI_TRE.dataset_to_dataframe-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.dataset_to_dataframe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dataset_to_dataframe(store::DataStore, dataset::DataSet)::DataFrame</code></pre><p>Retrieve a dataset from store.lake and return as a DataFrame</p><ul><li><code>store</code>: The DataStore object containing the datastore and datalake connections.</li><li><code>dataset</code>: The DataSet object to be retrieved. NB version must be set.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L703-L709">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.dataset_variables-Tuple{DBInterface.Connection, AHRI_TRE.DataSet}" href="#AHRI_TRE.dataset_variables-Tuple{DBInterface.Connection, AHRI_TRE.DataSet}"><code>AHRI_TRE.dataset_variables</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dataset_variables(db::DBInterface.Connection, dataset)::AbstractDataFrame</code></pre><p>Return the list of variables in a dataset</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L329-L333">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.emptydir-Tuple{AbstractString}" href="#AHRI_TRE.emptydir-Tuple{AbstractString}"><code>AHRI_TRE.emptydir</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">emptydir(path; create=true, retries=3, wait=0.2)</code></pre><p>Ensure <code>path</code> exists (if <code>create=true</code>), then remove all files/subdirs inside it, keeping <code>path</code> itself. Retries briefly to tolerate transient files.</p><p>Safety: refuses to operate on the filesystem root &quot;/&quot;.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L256-L263">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.ensure_vocabulary!-Tuple{DataStore, String, String, Vector{AHRI_TRE.AbstractVocabularyItem}}" href="#AHRI_TRE.ensure_vocabulary!-Tuple{DataStore, String, String, Vector{AHRI_TRE.AbstractVocabularyItem}}"><code>AHRI_TRE.ensure_vocabulary!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ensure_vocabulary!(db, vocab_name::String, description::String,
                   items::Vector{NamedTuple{(:value,:code,:description),Tuple{Int,String,Union{String,Missing}}}}) -&gt; Int</code></pre><p>Creates or reuses a vocabulary by name, and (re)loads items idempotently. Returns vocabulary_id.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2299-L2305">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.ensure_vocabulary!-Tuple{DataStore, Vocabulary}" href="#AHRI_TRE.ensure_vocabulary!-Tuple{DataStore, Vocabulary}"><code>AHRI_TRE.ensure_vocabulary!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ensure_vocabulary!(db, vocab::Vocabulary) -&gt; Int</code></pre><p>Ensure that <code>vocab</code> exists in the datastore <code>vocabularies</code> table and (re)load its items into <code>vocabulary_items</code>.</p><p>Returns the <code>vocabulary_id</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2344-L2351">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.extract_table_from_sql-Tuple{AbstractString}" href="#AHRI_TRE.extract_table_from_sql-Tuple{AbstractString}"><code>AHRI_TRE.extract_table_from_sql</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extract_table_from_sql(sql::AbstractString) -&gt; Union{String, Nothing}</code></pre><p>Attempt to extract the main table name from a simple SQL SELECT statement. This is a best-effort extraction and may not work for complex queries.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L619-L624">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.file_uri_to_path-Tuple{AbstractString}" href="#AHRI_TRE.file_uri_to_path-Tuple{AbstractString}"><code>AHRI_TRE.file_uri_to_path</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">file_uri_to_path(uri::AbstractString) -&gt; String</code></pre><p>Convert a <code>file://</code> URI to a local filesystem path (Windows or Unix). Handles:</p><ul><li>file:///C:/...        -&gt; C:... (Windows)</li><li>file://server/share   -&gt; \server\share (Windows UNC)</li><li>file:///home/me/...   -&gt; /home/me/... (Unix)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L58-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_asset-Tuple{DataStore, Base.UUID}" href="#AHRI_TRE.get_asset-Tuple{DataStore, Base.UUID}"><code>AHRI_TRE.get_asset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_asset(store::DataStore, asset_id::UUID)::Union{Asset,Nothing}</code></pre><p>Return an Asset object by its asset_id in the specified DataStore.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;asset_id&#39; is the UUID of the asset to search for.</li></ul><p>If no asset is found, it returns <code>nothing</code>. If an asset is found, it returns an Asset object with its versions populated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1605-L1613">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_asset-Tuple{DataStore, Study, String}" href="#AHRI_TRE.get_asset-Tuple{DataStore, Study, String}"><code>AHRI_TRE.get_asset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_asset(store::DataStore, study::Study, name::String)::Union{Asset,Nothing}

Return an Asset object by its name in the specified study.
- &#39;store&#39; is the DataStore object containing the database connection.
- &#39;study&#39; is the Study object to search in.
- &#39;name&#39; is the name of the asset to search for.
If no asset is found, it returns `nothing`.
If an asset is found, it returns an Asset object</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1545-L1554">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_assetversions-Tuple{DataStore, Asset}" href="#AHRI_TRE.get_assetversions-Tuple{DataStore, Asset}"><code>AHRI_TRE.get_assetversions</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_assetversions(store::DataStore, asset::Asset)::Vector{AssetVersion}</code></pre><p>Return a vector of AssetVersion objects for the specified asset.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;asset&#39; is the Asset object for which to retrieve versions.</li></ul><p>If no versions are found, it returns an empty vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1631-L1638">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_check_constraint_values-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_check_constraint_values-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_check_constraint_values</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_check_constraint_values(conn, table_name::AbstractString, column_name::AbstractString,
                             flavour::DatabaseFlavour) -&gt; Vector{VocabularyItem}</code></pre><p>Extract allowed values from CHECK constraints on a column.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L373-L378">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_code_table_vocabulary-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_code_table_vocabulary-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_code_table_vocabulary</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_code_table_vocabulary(conn, table_name::AbstractString, pk_column::AbstractString,
                           flavour::DatabaseFlavour) -&gt; Vector{VocabularyItem}</code></pre><p>Extract vocabulary items from a code/lookup table. Uses the primary key as value, first string column as code, and description column if present.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L232-L238">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_column_comment-Tuple{Any, AbstractString, AbstractString, Union{Nothing, AbstractString}, DatabaseFlavour}" href="#AHRI_TRE.get_column_comment-Tuple{Any, AbstractString, AbstractString, Union{Nothing, AbstractString}, DatabaseFlavour}"><code>AHRI_TRE.get_column_comment</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_column_comment(conn, table_name::AbstractString, column_name::AbstractString,
                   schema_name::Union{AbstractString,Nothing}, flavour::DatabaseFlavour) -&gt; Union{String,Missing}</code></pre><p>Get the comment/description for a column from the database metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L161-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_column_type_info-Tuple{Any, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_column_type_info-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_column_type_info</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_column_type_info(conn, sql::AbstractString, flavour::DatabaseFlavour) -&gt; Vector{Tuple{String,String,Union{String,Nothing}}}</code></pre><p>Get detailed column type information from the database for a query. Returns vector of (column<em>name, data</em>type, table_name) tuples.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L451-L456">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_datafile_meta-Tuple{DataStore, AssetVersion}" href="#AHRI_TRE.get_datafile_meta-Tuple{DataStore, AssetVersion}"><code>AHRI_TRE.get_datafile_meta</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_datafile_meta(store::DataStore, assetversion::AssetVersion)::Union{DataFile,Nothing}</code></pre><p>Get metadata for a DataFile associated with the specified AssetVersion.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>assetversion</code>: The AssetVersion object for which to retrieve the DataFile metadata.</li></ul><p>If no DataFile is found, it returns <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1886-L1893">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_datafilename-Tuple{DataFile}" href="#AHRI_TRE.get_datafilename-Tuple{DataFile}"><code>AHRI_TRE.get_datafilename</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_datafilename(datafile::DataFile)::String</code></pre><p>Get a valid filename for a datafile based on its asset name and version</p><ul><li><code>datafile</code>: The DataFile object for which to generate the filename.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L365-L370">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_datasetname-Tuple{AHRI_TRE.DataSet}" href="#AHRI_TRE.get_datasetname-Tuple{AHRI_TRE.DataSet}"><code>AHRI_TRE.get_datasetname</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_datasetname(dataset::DataSet; include_schema::Bool=false)::String</code></pre><p>Return a valid dataset name for the dataset, optionally including the schema (study) name.</p><ul><li><code>dataset</code>: The DataSet object for which to generate the name.</li><li><code>include_schema</code>: If true, includes the schema (study) name as a prefix to the dataset name (default is false).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L345-L351">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_domain-Tuple{DataStore, AbstractString}" href="#AHRI_TRE.get_domain-Tuple{DataStore, AbstractString}"><code>AHRI_TRE.get_domain</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_domain(store::DataStore, name::AbstractString; uri::Union{Nothing,String}=nothing)::Union{Domain,Nothing}</code></pre><p>Return a Domain object by its name (and optional URI) in the specified DataStore. If <code>uri</code> is <code>nothing</code>, it searches for the domain by name only. If <code>uri</code> is provided, it searches for the domain by both name and URI. If no domain is found, it returns <code>nothing</code>. If a domain is found, it returns a Domain object with the domain_id, name, uri, and description.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;name&#39; is the name of the domain to search for.</li><li>&#39;uri&#39; is an optional URI to further filter the domain search.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1183-L1194">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_eav_variable_names-Tuple{DataStore, DataFile}" href="#AHRI_TRE.get_eav_variable_names-Tuple{DataStore, DataFile}"><code>AHRI_TRE.get_eav_variable_names</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_eav_variable_names(store::DataStore, datafile::DataFile)::DataFrame</code></pre><p>Return a DataFrame containing all distinct EAV variable names from the specified datafile.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;datafile&#39; is the DataFile object for which to retrieve EAV variables.</li></ul><p>The DataFrame will contain a single column &#39;field_name&#39; with distinct variable names ordered alphabetically.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2158-L2165">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_entity-Tuple{DataStore, Int64, String}" href="#AHRI_TRE.get_entity-Tuple{DataStore, Int64, String}"><code>AHRI_TRE.get_entity</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_entity(store::DataStore, domain_id::Int, name::String)::Union{Entity,Nothing}</code></pre><p>Return an Entity object by its name in the specified domain.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;domain_id&#39; is the ID of the domain to search in.</li><li>&#39;name&#39; is the name of the entity to search for.</li></ul><p>If no entity is found, it returns <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1372-L1380">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_entityrelation-Tuple{DataStore, Int64, String}" href="#AHRI_TRE.get_entityrelation-Tuple{DataStore, Int64, String}"><code>AHRI_TRE.get_entityrelation</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_entityrelation(store::DataStore, domain_id::Int, name::String)::Union{EntityRelation,Nothing}</code></pre><p>Return an EntityRelation object by its name in the specified domain.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;domain_id&#39; is the ID of the domain to search in.</li><li>&#39;name&#39; is the name of the entity relation to search for.</li></ul><p>If no entity relation is found, it returns <code>nothing</code>. If an entity relation is found, it returns an EntityRelation object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1403-L1412">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_enum_values-Tuple{Any, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_enum_values-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_enum_values</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_enum_values(conn, type_name::AbstractString, flavour::DatabaseFlavour) -&gt; Vector{VocabularyItem}</code></pre><p>Get the values for an enum type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L355-L359">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_foreign_key_reference-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_foreign_key_reference-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_foreign_key_reference</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_foreign_key_reference(conn, table_name::AbstractString, column_name::AbstractString,
                          flavour::DatabaseFlavour) -&gt; Union{Nothing,Tuple{String,String}}</code></pre><p>Return the referenced table/column for a foreign key on <code>table_name.column_name</code>, or <code>nothing</code> if no foreign key relationship can be determined.</p><p>Database-specific overrides implement this for each flavour.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L175-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_latest_version-Tuple{Asset}" href="#AHRI_TRE.get_latest_version-Tuple{Asset}"><code>AHRI_TRE.get_latest_version</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_latest_version(asset::Asset)::Union{AssetVersion,Nothing}</code></pre><p>Return the latest AssetVersion for the specified asset.</p><ul><li>&#39;asset&#39; is the Asset object for which to retrieve the latest version.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1667-L1672">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_latest_version-Tuple{DataStore, Base.UUID}" href="#AHRI_TRE.get_latest_version-Tuple{DataStore, Base.UUID}"><code>AHRI_TRE.get_latest_version</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_latest_version(store::DataStore, asset_id::UUID)::Union{AssetVersion,Nothing}</code></pre><p>Return the latest AssetVersion for the specified asset_id in the DataStore.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;asset_id&#39; is the UUID of the asset for which to retrieve the latest version.</li></ul><p>If no latest version is found, it returns <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1687-L1694">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_namedkey-Tuple{DBInterface.Connection, Any, Any, Any}" href="#AHRI_TRE.get_namedkey-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.get_namedkey</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_namedkey(db::DBInterface.Connection, table, key, keycol)</code></pre><p>Return the integer key from table <code>table</code> in column <code>keycol</code> (<code>keycol</code> must be a <code>Symbol</code>) for key with name <code>key</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L253-L257">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_original_column_type-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_original_column_type-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_original_column_type</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_original_column_type(conn, table_name::AbstractString, column_name::AbstractString,
                          flavour::DatabaseFlavour) -&gt; Union{String,Nothing}</code></pre><p>Get the original column type from the database schema.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L462-L467">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_query_columns-Tuple{Any, AbstractString, AHRI_TRE.MSSQLFlavour}" href="#AHRI_TRE.get_query_columns-Tuple{Any, AbstractString, AHRI_TRE.MSSQLFlavour}"><code>AHRI_TRE.get_query_columns</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_query_columns(conn, sql::AbstractString, ::MSSQLFlavour) -&gt; Vector{ColumnInfo}</code></pre><p>MSSQL-specific implementation using sys.dm<em>exec</em>describe<em>first</em>result_set to get rich column metadata including source table and schema information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_msql.jl#L106-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_query_columns-Tuple{Any, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_query_columns-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_query_columns</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_query_columns(conn, sql::AbstractString, flavour::DatabaseFlavour) -&gt; Vector{ColumnInfo}</code></pre><p>Execute a query with LIMIT 0 or equivalent to get column metadata without fetching data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L94-L98">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_study-Tuple{DataStore, AbstractString}" href="#AHRI_TRE.get_study-Tuple{DataStore, AbstractString}"><code>AHRI_TRE.get_study</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_study(store::DataStore, name::AbstractString)::Union{Study,Nothing}</code></pre><p>Return a Study object by its name in the specified DataStore.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;name&#39; is the name of the study to search for.</li></ul><p>If no study is found, it returns <code>nothing</code>. If a study is found, it returns a Study object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1059-L1067">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_study-Tuple{DataStore, Base.UUID}" href="#AHRI_TRE.get_study-Tuple{DataStore, Base.UUID}"><code>AHRI_TRE.get_study</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_study(store::DataStore, id::UUID)::Union{Study,Nothing}</code></pre><p>Return a Study object by its UUID in the specified DataStore.</p><ul><li><code>store</code> is the DataStore object containing the database connection.</li><li><code>id</code> is the UUID of the study to search for.</li></ul><p>If no study is found, it returns <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1026-L1033">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_study_variables" href="#AHRI_TRE.get_study_variables"><code>AHRI_TRE.get_study_variables</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_study_variables(store::DataStore, study::Study)::DataFrame</code></pre><p>Return a DataFrame containing all variables associated with the specified study.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;study&#39; is the Study object to list variables from.</li><li>&#39;domain&#39; is an optional Domain object to filter variables by domain.</li></ul><p>If <code>domain</code> is provided, only variables from that domain are returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2176-L2184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_studyid-Tuple{DataStore, AbstractString}" href="#AHRI_TRE.get_studyid-Tuple{DataStore, AbstractString}"><code>AHRI_TRE.get_studyid</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_studyid(db::DBInterface.Connection, name)</code></pre><p>Return the <code>source_id</code> of source <code>name</code>, returns <code>missing</code> if source doesn&#39;t exist</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L235-L239">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_table-Tuple{DBInterface.Connection, String}" href="#AHRI_TRE.get_table-Tuple{DBInterface.Connection, String}"><code>AHRI_TRE.get_table</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_table(conn::DBInterface.Connection, table::String)::AbstractDataFrame</code></pre><p>Retrieve table <code>table</code> as a DataFrame from <code>conn</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L105-L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_table_columns-Tuple{Any, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.get_table_columns-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.get_table_columns</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_table_columns(conn, table_name::AbstractString, flavour::DatabaseFlavour) -&gt; Vector{ColumnInfo}</code></pre><p>Get column information for a table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L344-L348">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_variable-Tuple{DataStore, Int64}" href="#AHRI_TRE.get_variable-Tuple{DataStore, Int64}"><code>AHRI_TRE.get_variable</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_variable(db::DBInterface.Connection, variable_id::Int)</code></pre><p>Returns the entry of variable with <code>variable_id</code></p><ul><li>store: The DataStore object containing the datastore connection.</li><li>variable_id: The integer ID of the variable to retrieve.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L282-L288">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_variable_id-Tuple{DBInterface.Connection, Any, Any}" href="#AHRI_TRE.get_variable_id-Tuple{DBInterface.Connection, Any, Any}"><code>AHRI_TRE.get_variable_id</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_variable_id(db::DBInterface.Connection, domain, name)

Returns the `variable_id` of variable named `name` in domain with id `domain`</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L268-L272">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.get_vocabulary-Tuple{DataStore, Int64}" href="#AHRI_TRE.get_vocabulary-Tuple{DataStore, Int64}"><code>AHRI_TRE.get_vocabulary</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_vocabulary(store::DataStore, vocabulary_id::Int)::Union{Vocabulary,Nothing}</code></pre><p>Return a Vocabulary object by its vocabulary_id in the specified DataStore.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;vocabulary_id&#39; is the ID of the vocabulary to retrieve.</li></ul><p>If no vocabulary is found, it returns <code>nothing</code>. If a vocabulary is found, it returns a Vocabulary object with its items populated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2192-L2200">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.git_commit_info" href="#AHRI_TRE.git_commit_info"><code>AHRI_TRE.git_commit_info</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">git_commit_info(dir::AbstractString = @__DIR__; short::Bool = true, script_path::AbstractString = @__FILE__)</code></pre><p>Return version control information about the currently executing script for use in transformations.</p><ul><li><code>dir</code>: The directory to search for the git repository (default is the directory of the current script).</li><li><code>short</code>: Whether to return a short commit hash (default is true, returns first 7 characters of the hash).</li><li><code>script_path</code>: The path to the script being executed (default is the current script file).</li></ul><p>Returns a tuple with:</p><ul><li><code>repo_url</code>: The URL of the git repository (or <code>nothing</code> if not found).</li><li><code>commit</code>: The commit hash (or <code>nothing</code> if not found).</li><li><code>script_relpath</code>: The relative path of the script from the repository root (or <code>nothing</code> if not found).</li></ul><p>This function normalizes SSH remotes to HTTPS format. If the script is not in a git repository, it returns <code>nothing</code> for all fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L101-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.ingest_file-Tuple{DataStore, Study, String, AbstractString, String}" href="#AHRI_TRE.ingest_file-Tuple{DataStore, Study, String, AbstractString, String}"><code>AHRI_TRE.ingest_file</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ingest_file(store::DataStore, study::Study, asset_name::String, file_path::AbstractString, edam_format::String;
description::Union{String,Missing}=missing, compress::Bool=false, encrypt::Bool=false, new_version::Bool=false, bumpmajor::Bool = false, bumpminor::Bool=false)::Union{DataFile,Nothing}</code></pre><p>Ingest a file into the TRE data lake and register it in the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore and data lake.</li><li><code>study</code>: The Study object to associate with the ingested file.</li><li><code>asset_name</code>: The name of the asset to which the file will be attached. Must comply with xsd:NCName restrictions.</li><li><code>file_path</code>: The full path including the file name to the file to be ingested.</li><li><code>edam_format</code>: The EDAM format of the file (e.g., &quot;http://edamontology.org/format_3752&quot; for a csv file).</li><li><code>description</code>: A description of the data file (default is missing).</li><li><code>compress</code>: Whether the file should be compressed (default is false).   If true, the file will be compressed using zstd before being copied to the data lake.</li><li><code>encrypt</code>: Whether the file should be encrypted (default is false). <strong>NOT currently implemented</strong></li><li><code>new_version</code>: If true, and an asset with the same name already exists in the study, a new version will be created (default is false).</li><li><code>bumpmajor</code>: If true, increments the major version number and resets minor and patch to 0 for the new version (default is false).</li><li><code>bumpminor</code>: If true, increments the minor version number and resets patch to 0 for the new version (default is false).</li></ul><p>This function copies the file to the data lake directory, optionally compresses it, and registers it in the TRE datastore as a new asset or a new version of an existing asset. It returns the DataFile object representing the ingested file</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L870-L890">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.ingest_file_version" href="#AHRI_TRE.ingest_file_version"><code>AHRI_TRE.ingest_file_version</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ingest_file_version(store::DataStore, file_path::AbstractString, datafile::DataFile)::DataFile</code></pre><p>Ingest a new version of an existing data file in the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>file_path</code>: The full path including the file name to the new file.</li><li><code>datafile</code>: The existing DataFile object for which a new version is being ingested.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L577-L584">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.ingest_redcap_project-Tuple{DataStore, AbstractString, AbstractString, Study, Domain}" href="#AHRI_TRE.ingest_redcap_project-Tuple{DataStore, AbstractString, AbstractString, Study, Domain}"><code>AHRI_TRE.ingest_redcap_project</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ingest_redcap_project(api_url::AbstractString, api_token::AbstractString, study::Study, domain::Domain)</code></pre><p>Retrieves the REDCap project metadata and add the project variables to the TRE datastore. Downloads the REDCap project records in EAV format to a csv file and saves it to the data lake and creates an ingest transformation. Transforms the csv file from EAV (long) format to wide format dataset and registers the dataset in the TRE datastore.</p><ul><li><code>api_url</code>: The URL of the REDCap API endpoint.</li><li><code>api_token</code>: The API token for the REDCap project.</li><li><code>study</code>: The Study object to associate with the REDCap project. </li><li><code>domain</code>: The Domain object to associate with the REDCap project.</li><li><code>vocabulary_prefix</code>: The prefix for the vocabulary used in the REDCap project (default is &quot;REDCap&quot;).</li><li><code>forms</code>: A vector of form names to include in the REDCap project (default is empty, meaning all forms).</li><li><code>fields</code>: A vector of field names to include in the REDCap project (default is empty, meaning all fields).</li></ul><p>Returns the DataFile object representing the ingested REDCap project data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L422-L436">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.initstudytypes-Tuple{}" href="#AHRI_TRE.initstudytypes-Tuple{}"><code>AHRI_TRE.initstudytypes</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initstudytypes()</code></pre><p>Default study types</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L321-L325">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.initvalue_types-Tuple{}" href="#AHRI_TRE.initvalue_types-Tuple{}"><code>AHRI_TRE.initvalue_types</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">initvalue_types()</code></pre><p>Add default value types</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L509-L513">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.insertdata-Tuple{DBInterface.Connection, Any, Any, Any}" href="#AHRI_TRE.insertdata-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.insertdata</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">insertdata(conn::DBInterface.Connection, table, columns, values)</code></pre><p>Insert a set of values into a table, columns list the names of the columns to insert, and values the values to insert</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L179-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.insertwithidentity-Tuple{DBInterface.Connection, Any, Any, Any}" href="#AHRI_TRE.insertwithidentity-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.insertwithidentity</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">insertwithidentity(conn::DBInterface.Connection, table, columns, values)</code></pre><p>Insert a record, returning the identity column value</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L158-L162">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.is_code_table-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.is_code_table-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.is_code_table</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_code_table(conn, table_name::AbstractString, pk_column::AbstractString, flavour::DatabaseFlavour) -&gt; Bool</code></pre><p>Check if a table qualifies as a code/lookup table:</p><ul><li>Has less than 250 records</li><li>Has a primary key column matching the specified column name</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L191-L197">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.is_enum_type-Tuple{Any, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.is_enum_type-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.is_enum_type</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_enum_type(conn, type_name::AbstractString, flavour::DatabaseFlavour) -&gt; Bool</code></pre><p>Check if a type is an enum type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L364-L368">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.is_ncname-Tuple{AbstractString}" href="#AHRI_TRE.is_ncname-Tuple{AbstractString}"><code>AHRI_TRE.is_ncname</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_ncname(s::AbstractString) -&gt; Bool</code></pre><p>Return true if <code>s</code> is a valid NCName (no colon, proper start char, allowed name chars).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L175-L179">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.julia_type_to_sql_string-Tuple{Type}" href="#AHRI_TRE.julia_type_to_sql_string-Tuple{Type}"><code>AHRI_TRE.julia_type_to_sql_string</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">julia_type_to_sql_string(T::Type) -&gt; String</code></pre><p>Convert a Julia type to a SQL type string for type mapping.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L125-L129">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.lines-Tuple{Any}" href="#AHRI_TRE.lines-Tuple{Any}"><code>AHRI_TRE.lines</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">lines(str)</code></pre><p>Returns an array of lines in <code>str</code> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L323-L327">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_dataset_variables-Tuple{DataStore, AHRI_TRE.DataSet}" href="#AHRI_TRE.list_dataset_variables-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.list_dataset_variables</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_dataset_variables(store::DataStore, dataset::DataSet)::Vector{Variable}</code></pre><p>Retrieve the variables associated with a dataset from the datastore.</p><ul><li><code>store</code>: The DataStore object containing the database connection.</li><li><code>dataset</code>: The DataSet object for which to retrieve variables.</li></ul><p>This function returns a vector of Variable objects associated with the specified dataset. If the dataset already has variables populated, it returns those directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2685-L2693">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_domainentities-Tuple{DataStore, Int64}" href="#AHRI_TRE.list_domainentities-Tuple{DataStore, Int64}"><code>AHRI_TRE.list_domainentities</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_domainentities(store::DataStore, domain_id::Int)::DataFrame</code></pre><p>Return a DataFrame containing all entities in the specified domain.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;domain_id&#39; is the ID of the domain to list entities from.</li></ul><p>The DataFrame will contain all columns from the entities table, ordered by name. This function is useful for retrieving all entities in a domain for further processing or display.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1439-L1447">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_domainrelations-Tuple{DataStore, Int64}" href="#AHRI_TRE.list_domainrelations-Tuple{DataStore, Int64}"><code>AHRI_TRE.list_domainrelations</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_domainrelations(store::DataStore, domain_id::Int)::DataFrame</code></pre><p>Return a DataFrame containing all entity relations in the specified domain.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;domain_id&#39; is the ID of the domain to list entity relations from.</li></ul><p>The DataFrame will contain all columns from the entityrelations table, ordered by name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1458-L1465">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_studies-Tuple{DataStore}" href="#AHRI_TRE.list_studies-Tuple{DataStore}"><code>AHRI_TRE.list_studies</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_studies(store::DataStore)::Vector{Study}</code></pre><p>Return a vector of all Study objects in the specified DataStore.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li></ul><p>This function retrieves all studies from the database, ordered by name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1093-L1099">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_study_assets-Tuple{DataStore, Study}" href="#AHRI_TRE.list_study_assets-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_assets</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_study_assets(store::DataStore, study::Study; include_versions=true)::Vector{Asset}</code></pre><p>Return a DataFrame containing all assets in the specified study.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;study&#39; is the Study object to list assets from.</li><li>&#39;include_versions&#39; is a boolean flag indicating whether to include asset versions in the returned Asset objects.</li></ul><p>The DataFrame will contain all columns from the assets table, ordered by name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1513-L1520">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_study_assets_df-Tuple{DataStore, Study}" href="#AHRI_TRE.list_study_assets_df-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_assets_df</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_study_assets_df(store::DataStore, study::Study; include_versions=true)::DataFrame</code></pre><p>Return a DataFrame containing all assets in the specified study.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;study&#39; is the Study object to list assets from.</li><li>&#39;include_versions&#39; is a boolean flag indicating whether to include asset versions in the DataFrame.</li></ul><p>If <code>include_versions</code> is true, the DataFrame will include asset version details</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1476-L1484">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_study_datasets-Tuple{DataStore, Study}" href="#AHRI_TRE.list_study_datasets-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_datasets</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_study_datasets(store::DataStore, study::Study; include_versions=false)::Vector{DataSet}</code></pre><p>Retrieve all datasets associated with a study from the datastore.</p><ul><li><code>store</code>: The DataStore object containing the database connection.</li><li><code>study</code>: The Study object for which to retrieve datasets.</li><li><code>include_versions</code>: A boolean flag indicating whether to include all versions of each dataset asset, or just the latest version (default is false).</li></ul><p>This function returns a vector of DataSet objects associated with the specified study.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2730-L2738">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_study_transformations-Tuple{DataStore, Study}" href="#AHRI_TRE.list_study_transformations-Tuple{DataStore, Study}"><code>AHRI_TRE.list_study_transformations</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_study_transformations(store::DataStore, study::Study)::DataFrame</code></pre><p>Return a DataFrame containing all transformations associated with assets in the specified study.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;study&#39; is the Study object to list transformations from.</li></ul><p>The DataFrame will contain all columns from the transformations table, ordered by date_created descending.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2062-L2069">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.list_study_variables" href="#AHRI_TRE.list_study_variables"><code>AHRI_TRE.list_study_variables</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_study_variables(store::DataStore, study::Study, domain::Union{Domain,Nothing}=nothing)::Vector{Variable}</code></pre><p>Return a vector of Variable objects associated with the specified study.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;study&#39; is the Study object to list variables from.</li><li>&#39;domain&#39; is an optional Domain object to filter variables by domain.</li></ul><p>If <code>domain</code> is provided, only variables from that domain are returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2238-L2246">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.load_query-Tuple{DataStore, AHRI_TRE.DataSet, DBInterface.Connection, AbstractString}" href="#AHRI_TRE.load_query-Tuple{DataStore, AHRI_TRE.DataSet, DBInterface.Connection, AbstractString}"><code>AHRI_TRE.load_query</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_query(datastore::DataStore, dataset::DataSet, source_conn::DBInterface.Connection, sql::AbstractString)</code></pre><p>Load data from a source database connection into a dataset table in the TRE lake.</p><ul><li>&#39;datastore&#39; is the DataStore object containing the datastore and datalake connections.</li><li>&#39;dataset&#39; is the DataSet object representing the target dataset.</li><li>&#39;source_conn&#39; is the DBInterface.Connection object for the source database.</li><li>&#39;sql&#39; is the SQL query string to retrieve data from the source database.</li></ul><p>This function creates the target table in the TRE lake based on the dataset&#39;s variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2644-L2653">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.make_asset-Tuple{DataStore, DataFrames.DataFrameRow, Study}" href="#AHRI_TRE.make_asset-Tuple{DataStore, DataFrames.DataFrameRow, Study}"><code>AHRI_TRE.make_asset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">make_asset(row::DataFrameRow, study::Study; include_versions=true)::Asset</code></pre><p>Helper function to create an Asset object from a DataFrameRow and a Study.</p><ul><li><code>store</code> is the DataStore object containing the database connection.</li><li><code>row</code> is a DataFrameRow containing asset data.</li><li><code>study</code> is the Study object to associate with the asset.</li><li><code>include_versions</code> is a boolean flag indicating whether to include asset versions in the Asset object.</li></ul><p>This function returns an Asset object with its versions populated if requested.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1579-L1588">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.makeparams-Tuple{Any}" href="#AHRI_TRE.makeparams-Tuple{Any}"><code>AHRI_TRE.makeparams</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">makeparam(s)</code></pre><p>Return a parameterized string for SQL queries</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L115-L119">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.map_sql_type_to_tre-Tuple{AbstractString, DatabaseFlavour}" href="#AHRI_TRE.map_sql_type_to_tre-Tuple{AbstractString, DatabaseFlavour}"><code>AHRI_TRE.map_sql_type_to_tre</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">map_sql_type_to_tre(sql_type::AbstractString, flavour::DatabaseFlavour) -&gt; Int</code></pre><p>Map a SQL data type string to the corresponding TRE<em>TYPE</em>* constant. Returns the TRE type ID.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L40-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.map_value_type-Tuple{AbstractString, Union{Missing, AbstractString}}" href="#AHRI_TRE.map_value_type-Tuple{AbstractString, Union{Missing, AbstractString}}"><code>AHRI_TRE.map_value_type</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">map_value_type(field_type::String, validation::Union{Missing,String}) -&gt; Int</code></pre><p>REDCap field<em>type and validation -&gt; TRE value</em>type_id.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L241-L245">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.opendatastore" href="#AHRI_TRE.opendatastore"><code>AHRI_TRE.opendatastore</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">opendatastore(server::AbstractString, user::AbstractString, password::AbstractString, database::AbstractString, lake_data::Union{String,Nothing}=nothing, lake_db::Union{String,Nothing}=nothing)</code></pre><p>Open a database connection to a PostgreSQL server with optional DuckDB data lake support. This function connects to a PostgreSQL server using the provided credentials and database name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L53-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.parse_check_constraint_values-Tuple{AbstractString, AbstractString}" href="#AHRI_TRE.parse_check_constraint_values-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.parse_check_constraint_values</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_check_constraint_values(constraint_def::AbstractString, column_name::AbstractString) -&gt; Vector{VocabularyItem}</code></pre><p>Parse a CHECK constraint definition to extract allowed string values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L384-L388">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.parse_flavour-Tuple{AbstractString}" href="#AHRI_TRE.parse_flavour-Tuple{AbstractString}"><code>AHRI_TRE.parse_flavour</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_flavour(flavour::AbstractString) -&gt; DatabaseFlavour</code></pre><p>Convert a string database flavour name to the corresponding type for dispatch.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L16-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.parse_in_list_values-Tuple{AbstractString}" href="#AHRI_TRE.parse_in_list_values-Tuple{AbstractString}"><code>AHRI_TRE.parse_in_list_values</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_in_list_values(values_str::AbstractString) -&gt; Vector{VocabularyItem}</code></pre><p>Parse a comma-separated list of quoted values into VocabularyItems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L419-L423">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.parse_redcap_choices-Tuple{AbstractString}" href="#AHRI_TRE.parse_redcap_choices-Tuple{AbstractString}"><code>AHRI_TRE.parse_redcap_choices</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">parse_redcap_choices(s::AbstractString) -&gt; Vector{NamedTuple{(:value,:code,:description),Tuple{Int,String,Union{String,Missing}}}}</code></pre><p>Parses &quot;1, Male | 2, Female&quot; into a vector of items.</p><ul><li>value: Int (left id)</li><li>code:  String (tokenized label; spaces -&gt; <code>_</code>)</li><li>description: original label</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L146-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.path_to_file_uri-Tuple{AbstractString}" href="#AHRI_TRE.path_to_file_uri-Tuple{AbstractString}"><code>AHRI_TRE.path_to_file_uri</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">path_to_file_uri(path::AbstractString) -&gt; String</code></pre><p>Convert a local filesystem path (Windows or Unix) to a <code>file://</code> URI.</p><ul><li>Windows local path:   C:\Users\me\file.txt   -&gt; file:///C:/Users/me/file.txt</li><li>Windows UNC path:     \srv\share\f.txt     -&gt; file://srv/share/f.txt</li><li>Unix path:            /home/me/file.txt         -&gt; file:///home/me/file.txt</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L24-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.prepare_datafile-Tuple{AbstractString, String}" href="#AHRI_TRE.prepare_datafile-Tuple{AbstractString, String}"><code>AHRI_TRE.prepare_datafile</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prepare_datafile(file_path::AbstractString, edam_format::String; compress::Bool=false, encrypt::Bool=false) -&gt; DataFile</code></pre><p>Prepare a DataFile for registration: validate path, optionally compress, compute digest and populate DataFile fields.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L480-L484">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.prepareinsertstatement-Tuple{DBInterface.Connection, Any, Any}" href="#AHRI_TRE.prepareinsertstatement-Tuple{DBInterface.Connection, Any, Any}"><code>AHRI_TRE.prepareinsertstatement</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prepareinsertstatement(conn::DBInterface.Connection, table, columns)</code></pre><p>Prepare an insert statement for PostgreSQL into table for columns</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L135-L139">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.prepareselectstatement-Tuple{DBInterface.Connection, Any, Vector{String}, Vector{String}}" href="#AHRI_TRE.prepareselectstatement-Tuple{DBInterface.Connection, Any, Vector{String}, Vector{String}}"><code>AHRI_TRE.prepareselectstatement</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prepareselectstatement(conn::DBInterface.Connection, table, columns::Vector{String}, filter::Vector{String})</code></pre><p>Return a statement to select columns from a table, with 0 to n columns to filter on</p><ul><li><code>conn</code>: The database connection</li><li><code>table</code>: The name of the table to query</li><li><code>columns</code>: A vector of column names to select</li><li><code>filter</code>: A vector of column names to filter on</li><li>returns: A prepared statement object</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L189-L198">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.quote_ident-Tuple{AbstractString}" href="#AHRI_TRE.quote_ident-Tuple{AbstractString}"><code>AHRI_TRE.quote_ident</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">quote_ident(name::AbstractString)</code></pre><p>Return a quoted identifier for SQL queries.</p><ul><li>&#39;name&#39; is the identifier to quote, typically a table or column name.</li></ul><p>This function wraps the identifier in double quotes and escapes any existing double quotes by doubling them.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2478-L2484">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.quote_identifier-Tuple{AbstractString, DatabaseFlavour}" href="#AHRI_TRE.quote_identifier-Tuple{AbstractString, DatabaseFlavour}"><code>AHRI_TRE.quote_identifier</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">quote_identifier(name::AbstractString, flavour::DatabaseFlavour) -&gt; String</code></pre><p>Quote an identifier appropriately for the database flavour.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L223-L227">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.quote_sql_str-Tuple{AbstractString}" href="#AHRI_TRE.quote_sql_str-Tuple{AbstractString}"><code>AHRI_TRE.quote_sql_str</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">quote_sql_str(s::AbstractString)</code></pre><p>Return a quoted SQL string for use in SQL queries.</p><ul><li>&#39;s&#39; is the string to quote.</li></ul><p>This function wraps the string in single quotes and escapes any existing single quotes by doubling them.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2486-L2492">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.read_dataset-Tuple{DataStore, AHRI_TRE.DataSet}" href="#AHRI_TRE.read_dataset-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.read_dataset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_dataset(store::DataStore, dataset::DataSet)::AbstractDataFrame</code></pre><p>Read a dataset from the TRE datastore and return it as an AbstractDataFrame.</p><ul><li><code>store</code>: The DataStore object containing the datastore connection.</li><li><code>dataset</code>: The DataSet object representing the dataset to be read.</li></ul><p>This function retrieves the dataset from the datastore and converts it to an AbstractDataFrame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L715-L722">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.read_dataset-Tuple{DataStore, String, String}" href="#AHRI_TRE.read_dataset-Tuple{DataStore, String, String}"><code>AHRI_TRE.read_dataset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_dataset(store::DataStore, study_name::String, dataset_name::String)::AbstractDataFrame</code></pre><p>Read a dataset from the TRE datastore by study name and dataset name.</p><ul><li><code>store</code>: The DataStore object containing the datastore connection.</li><li><code>study_name</code>: The name of the study containing the dataset.</li><li><code>dataset_name</code>: The name of the dataset to be read.</li></ul><p>This function retrieves the study and dataset asset from the datastore, gets the latest version of the dataset, and converts it to an AbstractDataFrame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L726-L735">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.redcap_export_eav-Tuple{AbstractString, AbstractString}" href="#AHRI_TRE.redcap_export_eav-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_export_eav</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redcap_export_eav(api_url::AbstractString, api_token::AbstractString; forms::Vector{String}=String[], fields::Vector{String}=String[],lake_root = ENV[&quot;TRE_LAKE_PATH&quot;], decode::Bool=false)::String</code></pre><p>Exports REDCap data in EAV format (Entity-Attribute-Value) as a CSV file.</p><ul><li>api_url: REDCap API URL</li><li>api_token: API token</li><li>forms: Optional vector of form names to export (default: all forms)</li><li>fields: Optional vector of field names to export (default: all fields)</li><li>lake<em>root: Root directory for saving the export file (default: TRE</em>LAKE_PATH environment variable)</li><li>decode: If true, decode the response body from ISO-8859-2 to UTF-8 before saving</li></ul><p>Returns the path to the saved CSV file. <strong>REDCap Bug</strong>: The API ignores the <code>fields</code> parameter and returns all fields, irrespective of the <code>fields</code> parameter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L425-L437">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.redcap_fields-Tuple{AbstractString, AbstractString}" href="#AHRI_TRE.redcap_fields-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_fields</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redcap_fields(api_url::AbstractString, api_token::AbstractString;
forms::Union{Nothing,Vector{String}}=nothing,
include_nondata::Bool=false)::Vector{String}</code></pre><p>Fetches REDCap metadata fields, optionally filtering by forms and including non-data fields. Returns a vector of field names.</p><ul><li>url: REDCap API URL</li><li>token: API token</li><li>forms: Optional vector of form names to filter by (default: all forms)</li><li>include_nondata: If true, include non-data fields like descriptive, file, sql, signature</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L382-L393">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.redcap_metadata-Tuple{AbstractString, AbstractString}" href="#AHRI_TRE.redcap_metadata-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_metadata</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redcap_metadata(url::AbstractString, token::AbstractString;
                forms::Union{Nothing,Vector{String}}=nothing) -&gt; DataFrame</code></pre><p>Downloads REDCap data dictionary (metadata) as a DataFrame.</p><ul><li><code>url</code>: REDCap API URL</li><li><code>token</code>: API token</li><li><code>forms</code>: Optional vector of form names to filter by (default: all forms)</li><li><code>fields</code>: Optional vector of field names to filter by (default: all fields)</li></ul><p><strong>REDCap Bug</strong>: The API ignores the <code>fields</code> parameter and returns all fields, irrespective of the <code>fields</code> parameter. Returns a DataFrame with columns: field<em>name, field</em>type, text<em>validation</em>type<em>or</em>show<em>slider</em>number, select<em>choices</em>or<em>calculations, field</em>label, field_note.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L87-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.redcap_post-Tuple{Any, AbstractDict}" href="#AHRI_TRE.redcap_post-Tuple{Any, AbstractDict}"><code>AHRI_TRE.redcap_post</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redcap_post(body::Dict)::HTTP.Response</code></pre><p>Do a POST request to the REDCap API with the given body.</p><ul><li><code>api_url</code>: REDCap API URL</li><li><code>body</code>: Dictionary containing the POST parameters</li><li><code>retry</code>: Number of retry attempts in case of failure (default: 5)</li></ul><p>Returns the HTTP response object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L40-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.redcap_post_tofile-Tuple{Any, AbstractDict, String}" href="#AHRI_TRE.redcap_post_tofile-Tuple{Any, AbstractDict, String}"><code>AHRI_TRE.redcap_post_tofile</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redcap_post_tofile(api_url, body::AbstractDict, outputfile::String; decode::Bool=false, retry=5)::Bool</code></pre><p>Do a POST request to the REDCap API with the given body and save the response to a file.</p><ul><li><code>api_url</code>: REDCap API URL</li><li><code>body</code>: Dictionary containing the POST parameters</li><li><code>outputfile</code>: File path to save the response</li><li><code>decode</code>: If true, decode the response body from ISO-8859-2 to UTF-8 before saving</li><li><code>retry</code>: Number of retry attempts in case of failure (default: 5)</li></ul><p>Returns true if successful, false otherwise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L56-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.redcap_project_info-Tuple{AbstractString, AbstractString}" href="#AHRI_TRE.redcap_project_info-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_project_info</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redcap_project_info(url, token; raw=false) -&gt; NamedTuple | JSON3.Object</code></pre><p>Fetch high-level REDCap project information (title, purpose, status, etc.). When <code>raw=true</code>, return the parsed JSON3.Object directly. When <code>raw=false</code> (default), return a <code>NamedTuple</code> with symbol keys suitable for constructing a DataFrame or logging.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L349-L356">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.redcap_project_info_df-Tuple{AbstractString, AbstractString}" href="#AHRI_TRE.redcap_project_info_df-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.redcap_project_info_df</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">redcap_project_info_df(url, token) -&gt; DataFrame</code></pre><p>Convenience wrapper returning a single-row DataFrame with project metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L373-L377">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.register_datafile-Tuple{DataStore, DataFile}" href="#AHRI_TRE.register_datafile-Tuple{DataStore, DataFile}"><code>AHRI_TRE.register_datafile</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">register_datafile(store::DataStore, datafile::DataFile)</code></pre><p>Register a DataFile in the TRE datastore. The assetversion must already exist in the datastore.</p><ul><li><code>store</code>: The Datastore object containing connection details for the datastore.</li><li><code>datafile</code>: The DataFile object to register, which must have a valid assetversion.</li></ul><p>This function will insert the datafile into the database and associate it with the specified asset version.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1844-L1851">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.register_dataset-Tuple{DataStore, AHRI_TRE.DataSet}" href="#AHRI_TRE.register_dataset-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.register_dataset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">register_dataset(store::DataStore, dataset::DataSet)::Nothing</code></pre><p>Register a Dataset in the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>dataset</code>: The Dataset object to register, which must have a valid dataset_id.</li></ul><p>This function will insert the dataset into the database.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1868-L1875">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.register_redcap_datadictionary-Tuple{DataStore, Int64, String, String}" href="#AHRI_TRE.register_redcap_datadictionary-Tuple{DataStore, Int64, String, String}"><code>AHRI_TRE.register_redcap_datadictionary</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">register_redcap_datadictionary(store::DataStore,
domain_id::Int, redcap_url::String, redcap_token::String;
forms=String[], vocabulary_prefix::String=&quot;&quot;, use_transaction = true)::DataFrame</code></pre><p>Field types: &quot;descriptive&quot;,&quot;sql&quot;,&quot;signature&quot;,&quot;file&quot; are ignored. This function downloads the REDCap metadata, processes it, and registers variables in the given DataStore.     Database actions are wrapped in a transaction and rolled back on error, if use_transaction = true (default).</p><ul><li><code>store</code>: DataStore instance to use for database operations</li><li><code>domain_id</code>: Domain ID to register variables under</li><li><code>redcap_url</code>: REDCap API URL</li><li><code>redcap_token</code>: API token for the REDCap project</li><li><code>forms</code>: Optional vector of form names to filter by (default: all forms)</li><li><code>vocabulary_prefix</code>: Optional prefix for vocabulary names (default: empty)</li><li><code>use_transaction</code>: If true (default), wrap database actions in a transaction</li></ul><p>Returns a DataFrame with columns: field<em>name, variable</em>id, value<em>type</em>id, vocabulary<em>id, field</em>type, validation, label, note.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L274-L290">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.replace_database-Tuple{DBInterface.Connection, String, String, String}" href="#AHRI_TRE.replace_database-Tuple{DBInterface.Connection, String, String, String}"><code>AHRI_TRE.replace_database</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">replace_database(conn::DBInterface.Connection, database::String, user::String, password::String)</code></pre><p>Replace the existing database with a new one, dropping it first if it exists.      This function is used to reset the database, typically for development or testing purposes.     Creates the user role if it does not exist, and set the rolle as the owner of the new database. NB: ONLY USE THIS FUNCTION IN DEVELOPMENT OR TESTING ENVIRONMENTS,     as it will drop the existing database, lake and all its contents.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.save_asset_version!-Tuple{DataStore, Asset, String, Union{Nothing, VersionNumber}}" href="#AHRI_TRE.save_asset_version!-Tuple{DataStore, Asset, String, Union{Nothing, VersionNumber}}"><code>AHRI_TRE.save_asset_version!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_asset_version!(store::DataStore, existing_asset::Asset, description::String, new_version::Union{VersionNumber,Nothing})</code></pre><p>Save a new version of an existing asset in the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>existing_asset</code>: The existing Asset object for which to create a new version.</li><li><code>description</code>: A description or note for the new version.</li><li><code>new_version</code>: An optional VersionNumber object specifying the new version numbers. If <code>nothing</code>, the patch number of the latest version will be incremented by 1.</li></ul><p>This function will create and save a new AssetVersion for the existing asset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1811-L1820">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.save_dataset_variables!-Tuple{DataStore, AHRI_TRE.DataSet}" href="#AHRI_TRE.save_dataset_variables!-Tuple{DataStore, AHRI_TRE.DataSet}"><code>AHRI_TRE.save_dataset_variables!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_dataset_variables!(store::DataStore, dataset::DataSet)::Nothing</code></pre><p>Persist the variable metadata attached to <code>dataset.variables</code> into the datastore metadata tables:</p><ul><li>Upserts rows in <code>variables</code> (unique on <code>(domain_id, name)</code>)</li><li>Creates/updates vocabularies and vocabulary_items for categorical/multiresponse variables</li><li>Links the dataset version to its variables in <code>dataset_variables</code></li></ul><p>On return, each <code>Variable</code> in <code>dataset.variables</code> will have <code>variable_id</code> (and where applicable <code>vocabulary_id</code>) populated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2357-L2368">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.save_version!-Tuple{DataStore, AssetVersion}" href="#AHRI_TRE.save_version!-Tuple{DataStore, AssetVersion}"><code>AHRI_TRE.save_version!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_version!(store::DataStore, version::AssetVersion)::AssetVersion</code></pre><p>Save an AssetVersion object to the TRE datastore.</p><ul><li><code>store</code>: The DataStore object containing connection details for the datastore.</li><li><code>version</code>: The AssetVersion object to save.</li></ul><p>If the version is marked as latest, it will unset the is_latest flag on all other versions</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1753-L1760">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.savedataframe-Tuple{DBInterface.Connection, DataFrames.AbstractDataFrame, Any}" href="#AHRI_TRE.savedataframe-Tuple{DBInterface.Connection, DataFrames.AbstractDataFrame, Any}"><code>AHRI_TRE.savedataframe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">savedataframe(con::DBInterface.Connection, df::AbstractDataFrame, table)</code></pre><p>Save a DataFrame to a database table, the names of the dataframe columns should be identical to the table column names in the database</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L121-L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.selectdataframe-Tuple{DBInterface.Connection, String, Vector{String}, Vector{String}, Union{Tuple, AbstractDict, NamedTuple, AbstractVector}}" href="#AHRI_TRE.selectdataframe-Tuple{DBInterface.Connection, String, Vector{String}, Vector{String}, Union{Tuple, AbstractDict, NamedTuple, AbstractVector}}"><code>AHRI_TRE.selectdataframe</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">selectdataframe(conn::DBInterface.Connection, table::String, columns::Vector{String}, filter::Vector{String}, filtervalues::DBInterface.StatementParams)::AbstractDataFrame</code></pre><p>Return a dataframe from a table, with 0 to n columns to filter on</p><ul><li><code>conn</code>: The database connection</li><li><code>table</code>: The name of the table to query</li><li><code>columns</code>: A vector of column names to select</li><li><code>filter</code>: A vector of column names to filter on</li><li><code>filtervalues</code>: A vector of values corresponding to the filter columns</li><li>returns: A DataFrame containing the query results</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L211-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.set_version-Tuple{AssetVersion, Int64, Int64, Int64}" href="#AHRI_TRE.set_version-Tuple{AssetVersion, Int64, Int64, Int64}"><code>AHRI_TRE.set_version</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_version(assetverion::AssetVersion, major::Int, minor::Int, patch::Int)::AssetVersion</code></pre><p>Set the version numbers of an AssetVersion object.</p><ul><li><code>assetversion</code>: The AssetVersion object to update.    </li><li><code>major</code>: The major version number.</li><li><code>minor</code>: The minor version number.</li><li><code>patch</code>: The patch version number.</li></ul><p>Returns the updated AssetVersion object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1784-L1793">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.set_version-Tuple{AssetVersion, VersionNumber}" href="#AHRI_TRE.set_version-Tuple{AssetVersion, VersionNumber}"><code>AHRI_TRE.set_version</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_version(assetverion::AssetVersion, version::VersionNumber)::AssetVersion</code></pre><p>Set the version numbers of an AssetVersion object using a VersionNumber object.</p><ul><li><code>assetversion</code>: The AssetVersion object to update.    </li><li><code>version</code>: The VersionNumber object containing major, minor, and patch numbers.</li></ul><p>Returns the updated AssetVersion object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1800-L1807">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.sha256_digest_hex-Tuple{AbstractString}" href="#AHRI_TRE.sha256_digest_hex-Tuple{AbstractString}"><code>AHRI_TRE.sha256_digest_hex</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sha256_digest_hex(path::AbstractString) -&gt; String</code></pre><p>Compute the SHA-256 (SHA2-256) digest of a file and return it as a lowercase hex string.</p><ul><li><code>path</code>: Path to the file to hash.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.sql_meta-Tuple{Any, AbstractString, Int64, AbstractString}" href="#AHRI_TRE.sql_meta-Tuple{Any, AbstractString, Int64, AbstractString}"><code>AHRI_TRE.sql_meta</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sql_meta(conn, sql::AbstractString, domain_id::Int, flavour::AbstractString) -&gt; Vector{Variable}</code></pre><p>Extract variable metadata from the columns of an SQL SELECT statement.</p><p><strong>Arguments</strong></p><ul><li><code>conn</code>: Database connection (DBInterface.Connection)</li><li><code>sql</code>: SQL SELECT statement</li><li><code>domain_id</code>: Domain ID to assign to variables</li><li><code>flavour</code>: Database flavour string (&quot;MSSQL&quot;, &quot;DuckDB&quot;, &quot;PostgreSQL&quot;, &quot;SQLite&quot;, or &quot;MySQL&quot;)</li></ul><p><strong>Returns</strong></p><p>Vector of Variable structures, one for each column in the query result.</p><p>The function:</p><ol><li>Executes the query with LIMIT 0 to get column metadata</li><li>Maps SQL types to TRE<em>TYPE</em>* constants</li><li>Detects CATEGORY types for:<ul><li>ENUM columns</li><li>Integer columns referencing code tables (&lt; 250 records)</li><li>String columns with CHECK constraints listing allowed values</li></ul></li><li>Populates Vocabulary for CATEGORY types</li><li>Retrieves column comments as descriptions where available</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L475-L498">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.sql_meta-Tuple{Any, AbstractString, Int64, DatabaseFlavour}" href="#AHRI_TRE.sql_meta-Tuple{Any, AbstractString, Int64, DatabaseFlavour}"><code>AHRI_TRE.sql_meta</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sql_meta(conn, sql::AbstractString, domain_id::Int, flavour::DatabaseFlavour) -&gt; Vector{Variable}</code></pre><p>Internal implementation using typed database flavour for dispatch.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L504-L508">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.sql_to_dataset-Tuple{DataStore, Study, Domain, String, Any, AbstractString, String}" href="#AHRI_TRE.sql_to_dataset-Tuple{DataStore, Study, Domain, String, Any, AbstractString, String}"><code>AHRI_TRE.sql_to_dataset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sql_to_dataset(store::DataStore, study::Study, domain::Domain, dataset_name::String, conn, db_flavour::AbstractString, sql::String;
description::String, replace::Bool=false, new_version::Union{VersionNumber,Nothing}=nothing)::DataSet</code></pre><p>Transform the result of an SQL query into a DataSet stored in the TRE DataStore.</p><p><strong>Arguments</strong></p><ul><li><code>store</code>: DataStore object</li><li><code>study</code>: Study object to associate the dataset with</li><li><code>domain</code>: Domain object for the dataset</li><li><code>dataset_name</code>: Name of the dataset to create</li><li><code>conn</code>: Database connection to execute the SQL query</li><li><code>db_flavour</code>: Database flavour type for metadata extraction</li><li><code>sql</code>: SQL query string to execute</li><li><code>description</code>: Description for the dataset asset/version</li><li><code>replace</code>: If true, replace existing dataset with the same name by creating a new version</li><li><code>new_version</code>: Optional Version object for the new dataset version</li></ul><p><strong>Returns</strong></p><p>The created DataSet object, or <code>nothing</code> on failure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L638-L656">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.table_exists-Tuple{Any, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.table_exists-Tuple{Any, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.table_exists</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">table_exists(conn, table_name::AbstractString, flavour::DatabaseFlavour) -&gt; Bool</code></pre><p>Check if a table exists in the database.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L441-L445">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.table_has_primary_key-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}" href="#AHRI_TRE.table_has_primary_key-Tuple{Any, AbstractString, AbstractString, DatabaseFlavour}"><code>AHRI_TRE.table_has_primary_key</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">table_has_primary_key(conn, table_name::AbstractString, column_name::AbstractString, flavour::DatabaseFlavour) -&gt; Bool</code></pre><p>Check if the specified column is the primary key of the table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L214-L218">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.to_ncname-Tuple{AbstractString}" href="#AHRI_TRE.to_ncname-Tuple{AbstractString}"><code>AHRI_TRE.to_ncname</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">to_ncname(s::AbstractString; replacement=&quot;_&quot;, prefix=&quot;_&quot;, avoid_reserved=true) -&gt; String</code></pre><p>Convert <code>s</code> into a valid NCName:</p><ul><li>Replaces any invalid char with <code>replacement</code> (default <code>_</code>).</li><li>If the first char is invalid, prepends <code>prefix</code> (default <code>_</code>).</li><li>Removes/condenses repeated <code>replacement</code>s.</li><li>Replaces <code>:</code> with <code>replacement</code>.</li><li>Optionally avoids names starting with &#39;xml&#39; (case-insensitive) by prepending <code>prefix</code>.</li><li>If strict=true, disallows <code>-</code> and <code>.</code> in names (replaces them too).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L196-L207">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transaction_begin-Tuple{DBInterface.Connection}" href="#AHRI_TRE.transaction_begin-Tuple{DBInterface.Connection}"><code>AHRI_TRE.transaction_begin</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transaction_begin(conn::DBInterface.Connection)</code></pre><p>Begin a transaction on the specified DBInterface.Connection.</p><ul><li>&#39;conn&#39; is the DBInterface.Connection object representing the database connection.</li></ul><p>Returns nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L923-L929">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transaction_begin-Tuple{DataStore}" href="#AHRI_TRE.transaction_begin-Tuple{DataStore}"><code>AHRI_TRE.transaction_begin</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transaction_begin(store::DataStore; on_lake::Bool=false)</code></pre><p>Begin a transaction on the specified DataStore or its lake connection.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;on_lake&#39; indicates whether to use the lake connection (true) or the main store connection (false).</li></ul><p>If &#39;on<em>lake&#39; is true, it begins a transaction on the lake connection. If &#39;on</em>lake&#39; is false, it begins a transaction on the main data store connection. Returns nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L910-L919">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transaction_commit-Tuple{DBInterface.Connection}" href="#AHRI_TRE.transaction_commit-Tuple{DBInterface.Connection}"><code>AHRI_TRE.transaction_commit</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transaction_commit(conn::DBInterface.Connection; on_lake::Bool=false)</code></pre><p>Commit a transaction on the specified DBInterface.Connection.</p><ul><li>&#39;conn&#39; is the DBInterface.Connection object representing the database connection.</li></ul><p>Returns nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L948-L954">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transaction_commit-Tuple{DataStore}" href="#AHRI_TRE.transaction_commit-Tuple{DataStore}"><code>AHRI_TRE.transaction_commit</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transaction_commit(store::DataStore; on_lake::Bool=false)</code></pre><p>Commit a transaction on the specified DataStore or its lake connection.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;on_lake&#39; indicates whether to use the lake connection (true) or the main store connection (false).</li></ul><p>If &#39;on<em>lake&#39; is true, it commits the transaction on the lake connection. If &#39;on</em>lake&#39; is false, it commits the transaction on the main data store connection. Returns nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L935-L944">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transaction_rollback-Tuple{DBInterface.Connection}" href="#AHRI_TRE.transaction_rollback-Tuple{DBInterface.Connection}"><code>AHRI_TRE.transaction_rollback</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transaction_rollback(conn::DBInterface.Connection; on_lake::Bool=false)</code></pre><p>Rollback a transaction on the specified DBInterface.Connection.</p><ul><li>&#39;conn&#39; is the DBInterface.Connection object representing the database connection.</li></ul><p>Returns nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L973-L979">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transaction_rollback-Tuple{DataStore}" href="#AHRI_TRE.transaction_rollback-Tuple{DataStore}"><code>AHRI_TRE.transaction_rollback</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transaction_rollback(store::DataStore; on_lake::Bool=false)</code></pre><p>Rollback a transaction on the specified DataStore or its lake connection.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;on_lake&#39; indicates whether to use the lake connection (true) or the main store connection (false).</li></ul><p>If &#39;on<em>lake&#39; is true, it rolls back the transaction on the lake connection. If &#39;on</em>lake&#39; is false, it rolls back the transaction on the main data store connection. Returns nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L960-L969">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transform_eav_to_dataset-Tuple{DataStore, DataFile}" href="#AHRI_TRE.transform_eav_to_dataset-Tuple{DataStore, DataFile}"><code>AHRI_TRE.transform_eav_to_dataset</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transform_eav_to_dataset(store::DataStore, datafile::DataFile)::DataSet</code></pre><p>Transform an EAV (Entity-Attribute-Value) data file into a dataset.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;datafile&#39; is the DataFile object representing the EAV data file.</li><li>&#39;convert&#39; indicates whether to convert data types based on variable definitions (default is true).</li></ul><p>This function creates a new dataset in the database by pivoting the EAV data into a wide format. It aggregates multiple values for the same field per record into a single column. The dataset name is derived from the datafile&#39;s asset name, dropping the &quot;<em>eav&quot; suffix if present. Returns a DataSet object representing the transformed data. This function assumes the EAV data is stored in a csv table with columns: record, field</em>name, and value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/AHRI_TRE.jl#L644-L656">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.transform_eav_to_table!-Tuple{DataStore, DataFile, AHRI_TRE.DataSet}" href="#AHRI_TRE.transform_eav_to_table!-Tuple{DataStore, DataFile, AHRI_TRE.DataSet}"><code>AHRI_TRE.transform_eav_to_table!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transform_eav_to_table!(store::DataStore, datafile::DataFile, dataset::DataSet)::Nothing</code></pre><p>Transform an EAV (Entity-Attribute-Value) data file into a table in the TRE lake.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;datafile&#39; is the DataFile object representing the EAV data file.</li><li>&#39;dataset&#39; is the DataSet object representing the target dataset.</li><li>&#39;convert&#39; is a boolean flag indicating whether to convert the output table to the value_types defined in the dataset.</li></ul><p>This function creates a new table in the TRE lake by pivoting the EAV data into a wide format. It aggregates multiple values for the same field per record into a single column. The table name is derived from the dataset&#39;s asset name. This function assumes the EAV data is stored in a csv table with columns: record, field_name, and value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2494-L2506">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.tre_type_to_duckdb_sql-Tuple{Int64}" href="#AHRI_TRE.tre_type_to_duckdb_sql-Tuple{Int64}"><code>AHRI_TRE.tre_type_to_duckdb_sql</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">tre_type_to_duckdb_sql(value_type_id::Int)::String</code></pre><p>Map TRE variable type IDs to DuckDB SQL data types.</p><ul><li>&#39;value<em>type</em>id&#39; is the TRE variable type ID. </li></ul><p>This function returns the corresponding DuckDB SQL data type as a string.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2594-L2600">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.update_domain-Tuple{DataStore, Domain}" href="#AHRI_TRE.update_domain-Tuple{DataStore, Domain}"><code>AHRI_TRE.update_domain</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_domain(store::DataStore, domain::Domain)::Nothing</code></pre><p>Update an existing domain record.</p><ul><li>&#39;store&#39; is the DataStore object containing the database connection.</li><li>&#39;domain&#39; is a Domain object containing the domain_id, name, uri, and description</li><li>returns nothing.</li></ul><p>This function updates the domain record identified by domain.domain<em>id with the new values for description and uri. It raises an error if domain.domain</em>id is nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1155-L1165">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.updatevalues-Tuple{DBInterface.Connection, Vararg{Any, 5}}" href="#AHRI_TRE.updatevalues-Tuple{DBInterface.Connection, Vararg{Any, 5}}"><code>AHRI_TRE.updatevalues</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">updatevalues(conn::DBInterface.Connection, table, condition_column, condition_value, columns, values)</code></pre><p>Update value of column given condition<em>value in condition</em>column</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L146-L150">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.updatevariable_vocabulary-Tuple{DBInterface.Connection, Any, Any, Any}" href="#AHRI_TRE.updatevariable_vocabulary-Tuple{DBInterface.Connection, Any, Any, Any}"><code>AHRI_TRE.updatevariable_vocabulary</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">updatevariable_vocabulary(conn::DBInterface.Connection, name, domain_id, vocabulary_id)</code></pre><p>Update variable vocabulary</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L524-L528">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.upsert_entity!-Tuple{DataStore, Entity}" href="#AHRI_TRE.upsert_entity!-Tuple{DataStore, Entity}"><code>AHRI_TRE.upsert_entity!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">upsert_entity!(store::DataStore, entity::Entity)::Entity</code></pre><p>Create or update an entity record. If an entity with the same (domain<em>id, name) already exists, it updates and returns its entity</em>id.</p><ul><li>&#39;entity&#39; is an Entity object containing the domain<em>id, name, description, ontology</em>namespace, and ontology_class.</li><li>&#39;store&#39; is the DataStore object containing the database connection.</li></ul><p>If the entity has a non-NULL ontology<em>namespace and ontology</em>class, it must be unique with respect to the (domain<em>id, name) combination. If the entity has a NULL ontology</em>namespace or ontology<em>class, it must be unique with respect to the (domain</em>id, name) combination,  allowing at most one row with a NULL ontology<em>namespace or ontology</em>class for each (domain_id, name).  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1279-L1288">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.upsert_entityrelation!-Tuple{DataStore, EntityRelation}" href="#AHRI_TRE.upsert_entityrelation!-Tuple{DataStore, EntityRelation}"><code>AHRI_TRE.upsert_entityrelation!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">upsert_entityrelation!(store::DataStore, r::EntityRelation)::EntityRelation</code></pre><p>Create or update an entity relation record. If a relation with the same (domain<em>id, name) already exists, it updates and returns its entityrelation</em>id.</p><ul><li>&#39;r&#39; is an EntityRelation object containing the entity<em>id</em>1, entity<em>id</em>2, domain<em>id, name, description, ontology</em>namespace, and ontology_class.</li><li>&#39;store&#39; is the DataStore object containing the database connection.</li></ul><p>If the relation has a non-NULL ontology<em>namespace and ontology</em>class, it must be unique with respect to the (domain<em>id, name) combination. If the relation has a NULL ontology</em>namespace or ontology<em>class, it must be unique with respect to the (domain</em>id, name) combination, allowing at most one row with a NULL ontology<em>namespace or ontology</em>class for each (domain<em>id, name). This function returns the updated or newly created EntityRelation object with the entityrelation</em>id and uuid set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L1325-L1335">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.upsert_study!-Tuple{DataStore, Study}" href="#AHRI_TRE.upsert_study!-Tuple{DataStore, Study}"><code>AHRI_TRE.upsert_study!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">upsert_study!(store::DataStore, study::Study)::Study</code></pre><p>Create or update a study record. If a study with the same name already exists, it updates and returns the study. Otherwise, it inserts a new row and returns the new study. If <code>study.study_id</code> is <code>nothing</code>, it inserts a new study and lets PostgreSQL assign</p><ul><li>&#39;study&#39; is a Study object containing the name, description, external<em>id, and study</em>type_id.</li><li>&#39;store&#39; is the DataStore object containing the database connection.</li></ul><p>If the study name is required and it must be unique.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L989-L998">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.upsert_variable!-Tuple{DataStore, Int64, String}" href="#AHRI_TRE.upsert_variable!-Tuple{DataStore, Int64, String}"><code>AHRI_TRE.upsert_variable!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">upsert_variable!(db, domain_id::Int, name::String; value_type_id::Int, vocabulary_id::Union{Nothing,Int}=nothing, description::Union{Missing,String}=missing) -&gt; Int</code></pre><p>Upserts into variables on (domain<em>id, name). Returns variable</em>id.</p><ul><li>&#39;datastore&#39; is the DataStore object containing the database connection.</li><li>&#39;domain_id&#39; is the ID of the domain to which the variable belongs.</li><li>&#39;name&#39; is the name of the variable.</li><li>&#39;value<em>type</em>id&#39; is the ID of the value type for the variable.</li><li>&#39;value_format&#39; is an optional format string for the variable&#39;s value type (default is missing).</li><li>&#39;vocabulary_id&#39; is an optional ID of the vocabulary associated with the variable (default is missing).</li><li>&#39;description&#39; is an optional description of the variable (default is missing).</li><li>&#39;note&#39; is an optional note for the variable (default is missing).</li><li>&#39;keyrole&#39; is an optional key role for the variable (default is &quot;none&quot;).</li><li>&#39;ontology_namespace&#39; is an optional ontology namespace for the variable (default is missing).</li><li>&#39;ontology_class&#39; is an optional ontology class for the variable (default is missing).</li></ul><p>Returns the variable_id of the inserted or updated variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/tredatabase.jl#L2102-L2118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.verify_sha256_digest-Tuple{AbstractString, AbstractString}" href="#AHRI_TRE.verify_sha256_digest-Tuple{AbstractString, AbstractString}"><code>AHRI_TRE.verify_sha256_digest</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">verify_sha256_digest(path::AbstractString, expected_hex::AbstractString) -&gt; Bool</code></pre><p>Check whether the file&#39;s SHA-256 digest matches the expected hex string. Returns <code>true</code> on match, <code>false</code> otherwise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/utils.jl#L14-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.vocabulary_items-Tuple{Any}" href="#AHRI_TRE.vocabulary_items-Tuple{Any}"><code>AHRI_TRE.vocabulary_items</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">vocabulary_items(items) -&gt; Vector{VocabularyItem}</code></pre><p>Convert a vector of REDCap choice items (as <code>NamedTuple</code>s with keys <code>:value</code>, <code>:code</code>, <code>:description</code>) into a vector of <code>VocabularyItem</code> structs.</p><p>Notes:</p><ul><li><code>vocabulary_id</code> is set to <code>0</code> as a placeholder; it should be populated when the vocabulary is persisted (e.g. via <code>ensure_vocabulary!</code>).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/redcap.jl#L218-L227">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AHRI_TRE.wrap_query_for_metadata-Tuple{AbstractString, DatabaseFlavour}" href="#AHRI_TRE.wrap_query_for_metadata-Tuple{AbstractString, DatabaseFlavour}"><code>AHRI_TRE.wrap_query_for_metadata</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">wrap_query_for_metadata(sql::AbstractString, flavour::DatabaseFlavour) -&gt; String</code></pre><p>Wrap the query to limit results for metadata extraction.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/AHRIORG/AHRI_TRE.jl/blob/f8b2543c57004dcf25b5495fb26e9062411bdd88/src/meta_common.jl#L115-L119">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../introduction/">« Introduction</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Saturday 27 December 2025 03:24">Saturday 27 December 2025</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
